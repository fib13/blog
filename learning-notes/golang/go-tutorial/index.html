<!doctype html><html><head>
<meta charset=utf-8>
<meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no">
<link rel=canonical href=https://www.shisanshiji.com/learning-notes/golang/go-tutorial/>
<title>
Golang 教程 | 十三时记
</title>
<link href=https://www.shisanshiji.com/css/fontawesome.min.css rel=stylesheet>
<link rel=stylesheet href=https://www.shisanshiji.com/css/ace.min.css>
<link rel=icon href=https://www.shisanshiji.com/img/favicon.png type=image/x-icon>
</head>
<body><nav class="navbar navbar-expand-lg navbar-dark bg-primary shadow sticky-top" id=navbarMain>
<div class=container>
<div>
<a class=navbar-brand href=/>
十三时记
</a>
</div>
<button class="navbar-toggler navbar-toggler-right collapsed" type=button data-toggle=collapse data-target=#navbarMainCollapse aria-controls=navbarMainCollapse aria-expanded=false aria-label="Toggle navigation">
<span class=navbar-toggler-icon></span>
</button>
<div class="collapse navbar-collapse" id=navbarMainCollapse>
<ul class="navbar-nav ml-auto">
<li class=nav-item>
<a class=nav-link href=https://github.com/jugggao target=_blank>
<i class="fab fa-github"></i>
</a>
</li>
</ul>
</div>
</div>
</nav>
<div class=container-fluid>
<div class=row>
<div class="docs-sidenav order-0 col-12 col-md-3 col-lg-2 col-xl-2 position-sticky border-right"><nav class="navbar navbar-expand-md navbar-light pl-0">
<button class="navbar-toggler navbar-toggler-right collapsed" type=button data-toggle=collapse data-target=#sidenav-left-collapse aria-controls=sidenav-left-collapse aria-expanded=false aria-label="Toggle navigation">
<span class=navbar-toggler-icon></span>
</button>
<div class="collapse navbar-collapse align-items-start flex-column" id=sidenav-left-collapse>
<form class="form-inline my-2 my-lg-0 searchbox">
<input class="form-control mr-sm-2 w-100" data-search-input id=search-by type=text placeholder=Search>
</form>
<ul class="navbar-nav flex-column pt-3">
<li data-nav-id=/learning-notes/ class="nav-item my-1 parent haschildren">
<a class="nav-link p-0" href=/learning-notes/><h6>学习笔记</h6></a>
<ul class="list-unstyled ml-2">
<li data-nav-id=/learning-notes/golang/ class="nav-item my-1 parent haschildren">
<a class="nav-link p-0" href=/learning-notes/golang/><h6>Golang 学习笔记</h6></a>
<ul class="list-unstyled ml-2">
<li data-nav-id=/learning-notes/golang/go-install/ class="nav-item my-1">
<a href=/learning-notes/golang/go-install/ class="nav-link p-0">
Go 安装
</a>
</li>
<li data-nav-id=/learning-notes/golang/go-tutorial/ class="nav-item my-1 active">
<a href=/learning-notes/golang/go-tutorial/ class="nav-link p-0">
Golang 教程
</a>
</li>
</ul>
</li>
</ul>
</li>
<li data-nav-id=/operation-guide/ class="nav-item my-1 haschildren">
<a class="nav-link p-0" href=/operation-guide/><h6>操作指南</h6></a>
<ul class="list-unstyled ml-2">
<li data-nav-id=/operation-guide/hugo-githubactiongithub-pages-%E6%90%AD%E5%BB%BA%E4%B8%AA%E4%BA%BA%E5%8D%9A%E5%AE%A2/ class="nav-item my-1">
<a href=/operation-guide/hugo-githubactiongithub-pages-%E6%90%AD%E5%BB%BA%E4%B8%AA%E4%BA%BA%E5%8D%9A%E5%AE%A2/ class="nav-link p-0">
Hugo&Github Action&Github Pages 搭建个人博客
</a>
</li>
<li data-nav-id=/operation-guide/kubernetes-%E5%BA%94%E7%94%A8%E4%BD%BF%E7%94%A8-keycloak-%E4%B8%8E-oauth2-proxy-%E8%BF%9B%E8%A1%8C%E8%AE%A4%E8%AF%81/ class="nav-item my-1">
<a href=/operation-guide/kubernetes-%E5%BA%94%E7%94%A8%E4%BD%BF%E7%94%A8-keycloak-%E4%B8%8E-oauth2-proxy-%E8%BF%9B%E8%A1%8C%E8%AE%A4%E8%AF%81/ class="nav-link p-0">
使用 Keycloak 与 Oauth2-Proxy 认证 Kubernetes 应用
</a>
</li>
</ul>
</li>
<li data-nav-id=/troubleshooting/ class="nav-item my-1 haschildren">
<a class="nav-link p-0" href=/troubleshooting/><h6>问题排查</h6></a>
<ul class="list-unstyled ml-2">
<li data-nav-id=/troubleshooting/elasticsearch-troubleshooting/ class="nav-item my-1">
<a href=/troubleshooting/elasticsearch-troubleshooting/ class="nav-link p-0">
Elasticsearch 问题排查
</a>
</li>
</ul>
</li>
<li data-nav-id=/devops/ class="nav-item my-1 haschildren">
<a class="nav-link p-0" href=/devops/><h6>DevOps</h6></a>
<ul class="list-unstyled ml-2">
<li data-nav-id=/devops/tekton/ class="nav-item my-1 haschildren">
<a class="nav-link p-0" href=/devops/tekton/><h6>Tekton CICD</h6></a>
<ul class="list-unstyled ml-2">
<li data-nav-id=/devops/tekton/tekton-practice-task/ class="nav-item my-1">
<a href=/devops/tekton/tekton-practice-task/ class="nav-link p-0">
Tekton 实践：安装
</a>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</nav>
</div>
<div class="docs-toc large order-lg-2 order-md-0 order-xs-1 col-12 col-lg-2 col-xl-2 position-sticky border-left"><div class=docs-toc>
<nav id=TableOfContents>
<ul>
<li><a href=#教程开始>教程：开始</a></li>
<li><a href=#教程创建一个-go-模块>教程：创建一个 Go 模块</a>
<ul>
<li><a href=#创建模块>创建模块</a></li>
<li><a href=#调用其他模块>调用其他模块</a></li>
<li><a href=#错误处理>错误处理</a></li>
<li><a href=#随机问候>随机问候</a></li>
<li><a href=#多人问候>多人问候</a></li>
<li><a href=#测试>测试</a></li>
<li><a href=#编译安装>编译安装</a></li>
</ul>
</li>
</ul>
</nav>
</div>
</div>
<div class="main col-12 order-1 col-md-9 col-lg-10 col-xl-8 py-3">
<h1>Golang 教程</h1>
<h2 id=教程开始>教程：开始</h2>
<div class=highlight><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>mkdir hello
<span style=color:#111>cd</span> hello

go mod init example/hello
vim hello.go
</code></pre></div><div class=highlight><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=color:#f92672>package</span> <span style=color:#75af00>main</span>

<span style=color:#f92672>import</span> <span style=color:#d88200>&#34;fmt&#34;</span>

<span style=color:#00a8c8>func</span> <span style=color:#75af00>main</span><span style=color:#111>()</span> <span style=color:#111>{</span>
    <span style=color:#75af00>fmt</span><span style=color:#111>.</span><span style=color:#75af00>Println</span><span style=color:#111>(</span><span style=color:#d88200>&#34;Hello, World!&#34;</span><span style=color:#111>)</span>
<span style=color:#111>}</span>
</code></pre></div><div class=highlight><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>go run .
</code></pre></div><p>引用外部包。</p>
<div class=highlight><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=color:#f92672>package</span> <span style=color:#75af00>main</span>

<span style=color:#f92672>import</span> <span style=color:#d88200>&#34;fmt&#34;</span>

<span style=color:#f92672>import</span> <span style=color:#d88200>&#34;rsc.io/quote&#34;</span>

<span style=color:#00a8c8>func</span> <span style=color:#75af00>main</span><span style=color:#111>()</span> <span style=color:#111>{</span>
    <span style=color:#75af00>fmt</span><span style=color:#111>.</span><span style=color:#75af00>Println</span><span style=color:#111>(</span><span style=color:#75af00>quote</span><span style=color:#111>.</span><span style=color:#75af00>Go</span><span style=color:#111>())</span>
<span style=color:#111>}</span>
</code></pre></div><p>下载外部包，并在 <code>go.mod</code> 中添加依赖以及生成认证文件 <code>go.sum</code>。</p>
<div class=highlight><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>go mod tidy
</code></pre></div><h2 id=教程创建一个-go-模块>教程：创建一个 Go 模块</h2>
<h3 id=创建模块>创建模块</h3>
<div class=highlight><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>mkdir greetings
<span style=color:#111>cd</span> greetings/

go mod init example.com/greetings

vim greetings.go
</code></pre></div><div class=highlight><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=color:#f92672>package</span> <span style=color:#75af00>greetings</span>

<span style=color:#f92672>import</span> <span style=color:#d88200>&#34;fmt&#34;</span>

<span style=color:#75715e>// Hello returns a greeting for the named person
</span><span style=color:#75715e></span><span style=color:#00a8c8>func</span> <span style=color:#75af00>Hello</span><span style=color:#111>(</span><span style=color:#75af00>name</span> <span style=color:#00a8c8>string</span><span style=color:#111>)</span> <span style=color:#00a8c8>string</span> <span style=color:#111>{</span>
    <span style=color:#75715e>// Return a greeting that embeds the the in a message.
</span><span style=color:#75715e></span>    <span style=color:#75af00>message</span> <span style=color:#f92672>:=</span> <span style=color:#75af00>fmt</span><span style=color:#111>.</span><span style=color:#75af00>Sprintf</span><span style=color:#111>(</span><span style=color:#d88200>&#34;Hi, %v. Welcome!&#34;</span><span style=color:#111>,</span> <span style=color:#75af00>name</span><span style=color:#111>)</span>
    <span style=color:#00a8c8>return</span> <span style=color:#75af00>message</span>
<span style=color:#111>}</span>
</code></pre></div><h3 id=调用其他模块>调用其他模块</h3>
<p>此时目录结构为：</p>
<pre tabindex=0><code>.
├── greetings
└── hello
</code></pre><div class=highlight><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=color:#111>cd</span> hello
rm -rf *

go mod init example.com/hello

vim hello.go
</code></pre></div><div class=highlight><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=color:#f92672>package</span> <span style=color:#75af00>main</span>

<span style=color:#f92672>import</span> <span style=color:#111>(</span>
	<span style=color:#d88200>&#34;fmt&#34;</span>

	<span style=color:#d88200>&#34;example.com/greetings&#34;</span>
<span style=color:#111>)</span>

<span style=color:#00a8c8>func</span> <span style=color:#75af00>main</span><span style=color:#111>()</span> <span style=color:#111>{</span>
	<span style=color:#75715e>// Get a greeting message and print it.
</span><span style=color:#75715e></span>	<span style=color:#75af00>message</span> <span style=color:#f92672>:=</span> <span style=color:#75af00>greetings</span><span style=color:#111>.</span><span style=color:#75af00>Hello</span><span style=color:#111>(</span><span style=color:#d88200>&#34;Gladys&#34;</span><span style=color:#111>)</span>
	<span style=color:#75af00>fmt</span><span style=color:#111>.</span><span style=color:#75af00>Println</span><span style=color:#111>(</span><span style=color:#75af00>message</span><span style=color:#111>)</span>
<span style=color:#111>}</span>
</code></pre></div><p>重定向 Go 模块路径并添加依赖：</p>
<div class=highlight><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>go mod edit -replace example.com/greetings<span style=color:#f92672>=</span>../greetings

go mod tidy
</code></pre></div><p>运行：</p>
<div class=highlight><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>go run .
</code></pre></div><h3 id=错误处理>错误处理</h3>
<p><code>greetings.go</code>：</p>
<div class=highlight><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=color:#f92672>package</span> <span style=color:#75af00>greetings</span>

<span style=color:#f92672>import</span> <span style=color:#111>(</span>
	<span style=color:#d88200>&#34;errors&#34;</span>
	<span style=color:#d88200>&#34;fmt&#34;</span>
<span style=color:#111>)</span>

<span style=color:#75715e>// Hello returns a greeting for the named person
</span><span style=color:#75715e></span><span style=color:#00a8c8>func</span> <span style=color:#75af00>Hello</span><span style=color:#111>(</span><span style=color:#75af00>name</span> <span style=color:#00a8c8>string</span><span style=color:#111>)</span> <span style=color:#111>(</span><span style=color:#00a8c8>string</span><span style=color:#111>,</span> <span style=color:#00a8c8>error</span><span style=color:#111>)</span> <span style=color:#111>{</span>
	<span style=color:#75715e>// If no name was given, return an error with a message.
</span><span style=color:#75715e></span>	<span style=color:#00a8c8>if</span> <span style=color:#75af00>name</span> <span style=color:#f92672>==</span> <span style=color:#d88200>&#34;&#34;</span> <span style=color:#111>{</span>
		<span style=color:#00a8c8>return</span> <span style=color:#d88200>&#34;&#34;</span><span style=color:#111>,</span> <span style=color:#75af00>errors</span><span style=color:#111>.</span><span style=color:#75af00>New</span><span style=color:#111>(</span><span style=color:#d88200>&#34;empty name&#34;</span><span style=color:#111>)</span>
	<span style=color:#111>}</span>

	<span style=color:#75715e>// If a name was received, Return a greeting that embeds the the
</span><span style=color:#75715e></span>	<span style=color:#75715e>// in a message.
</span><span style=color:#75715e></span>	<span style=color:#75af00>message</span> <span style=color:#f92672>:=</span> <span style=color:#75af00>fmt</span><span style=color:#111>.</span><span style=color:#75af00>Sprintf</span><span style=color:#111>(</span><span style=color:#d88200>&#34;Hi, %v. Welcome!&#34;</span><span style=color:#111>,</span> <span style=color:#75af00>name</span><span style=color:#111>)</span>
	<span style=color:#00a8c8>return</span> <span style=color:#75af00>message</span><span style=color:#111>,</span> <span style=color:#00a8c8>nil</span>
<span style=color:#111>}</span>
</code></pre></div><p><code>hello.go</code>：</p>
<div class=highlight><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=color:#f92672>package</span> <span style=color:#75af00>main</span>

<span style=color:#f92672>import</span> <span style=color:#111>(</span>
	<span style=color:#d88200>&#34;fmt&#34;</span>
	<span style=color:#d88200>&#34;log&#34;</span>

	<span style=color:#d88200>&#34;example.com/greetings&#34;</span>
<span style=color:#111>)</span>

<span style=color:#00a8c8>func</span> <span style=color:#75af00>main</span><span style=color:#111>()</span> <span style=color:#111>{</span>
	<span style=color:#75715e>// Set properties of the predefined Logger, including the log
</span><span style=color:#75715e></span>	<span style=color:#75715e>// entry prefix and a flag to disable printing the time, source
</span><span style=color:#75715e></span>	<span style=color:#75715e>// file, and line number.
</span><span style=color:#75715e></span>	<span style=color:#75af00>log</span><span style=color:#111>.</span><span style=color:#75af00>SetPrefix</span><span style=color:#111>(</span><span style=color:#d88200>&#34;greetings: &#34;</span><span style=color:#111>)</span>
	<span style=color:#75af00>log</span><span style=color:#111>.</span><span style=color:#75af00>SetFlags</span><span style=color:#111>(</span><span style=color:#ae81ff>0</span><span style=color:#111>)</span>

	<span style=color:#75715e>// Request a greeting message.
</span><span style=color:#75715e></span>	<span style=color:#75af00>message</span><span style=color:#111>,</span> <span style=color:#75af00>err</span> <span style=color:#f92672>:=</span> <span style=color:#75af00>greetings</span><span style=color:#111>.</span><span style=color:#75af00>Hello</span><span style=color:#111>(</span><span style=color:#d88200>&#34;&#34;</span><span style=color:#111>)</span>
	<span style=color:#75715e>// If an error was returned, print it to the console and exit the program.
</span><span style=color:#75715e></span>	<span style=color:#00a8c8>if</span> <span style=color:#75af00>err</span> <span style=color:#f92672>!=</span> <span style=color:#00a8c8>nil</span> <span style=color:#111>{</span>
		<span style=color:#75af00>log</span><span style=color:#111>.</span><span style=color:#75af00>Fatal</span><span style=color:#111>(</span><span style=color:#75af00>err</span><span style=color:#111>)</span>
	<span style=color:#111>}</span>

	<span style=color:#75715e>// If no error was returned, print the returned message to the massage.
</span><span style=color:#75715e></span>	<span style=color:#75af00>fmt</span><span style=color:#111>.</span><span style=color:#75af00>Println</span><span style=color:#111>(</span><span style=color:#75af00>message</span><span style=color:#111>)</span>
<span style=color:#111>}</span>
</code></pre></div><h3 id=随机问候>随机问候</h3>
<p><code>greetings.go</code>:</p>
<div class=highlight><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=color:#f92672>package</span> <span style=color:#75af00>greetings</span>

<span style=color:#f92672>import</span> <span style=color:#111>(</span>
	<span style=color:#d88200>&#34;errors&#34;</span>
	<span style=color:#d88200>&#34;fmt&#34;</span>
	<span style=color:#d88200>&#34;math/rand&#34;</span>
	<span style=color:#d88200>&#34;time&#34;</span>
<span style=color:#111>)</span>

<span style=color:#75715e>// Hello returns a greeting for the named person
</span><span style=color:#75715e></span><span style=color:#00a8c8>func</span> <span style=color:#75af00>Hello</span><span style=color:#111>(</span><span style=color:#75af00>name</span> <span style=color:#00a8c8>string</span><span style=color:#111>)</span> <span style=color:#111>(</span><span style=color:#00a8c8>string</span><span style=color:#111>,</span> <span style=color:#00a8c8>error</span><span style=color:#111>)</span> <span style=color:#111>{</span>
	<span style=color:#75715e>// If no name was given, return an error with a message.
</span><span style=color:#75715e></span>	<span style=color:#00a8c8>if</span> <span style=color:#75af00>name</span> <span style=color:#f92672>==</span> <span style=color:#d88200>&#34;&#34;</span> <span style=color:#111>{</span>
		<span style=color:#00a8c8>return</span> <span style=color:#d88200>&#34;&#34;</span><span style=color:#111>,</span> <span style=color:#75af00>errors</span><span style=color:#111>.</span><span style=color:#75af00>New</span><span style=color:#111>(</span><span style=color:#d88200>&#34;empty name&#34;</span><span style=color:#111>)</span>
	<span style=color:#111>}</span>

	<span style=color:#75715e>// If a name was received, Return a greeting that embeds the the in a
</span><span style=color:#75715e></span>	<span style=color:#75715e>// message.
</span><span style=color:#75715e></span>	<span style=color:#75af00>message</span> <span style=color:#f92672>:=</span> <span style=color:#75af00>fmt</span><span style=color:#111>.</span><span style=color:#75af00>Sprintf</span><span style=color:#111>(</span><span style=color:#75af00>randomFormat</span><span style=color:#111>(),</span> <span style=color:#75af00>name</span><span style=color:#111>)</span>
	<span style=color:#00a8c8>return</span> <span style=color:#75af00>message</span><span style=color:#111>,</span> <span style=color:#00a8c8>nil</span>
<span style=color:#111>}</span>

<span style=color:#75715e>// init sets initial values for variables used in the fuction.
</span><span style=color:#75715e></span><span style=color:#00a8c8>func</span> <span style=color:#75af00>init</span><span style=color:#111>()</span> <span style=color:#111>{</span>
	<span style=color:#75af00>rand</span><span style=color:#111>.</span><span style=color:#75af00>Seed</span><span style=color:#111>(</span><span style=color:#75af00>time</span><span style=color:#111>.</span><span style=color:#75af00>Now</span><span style=color:#111>().</span><span style=color:#75af00>UnixNano</span><span style=color:#111>())</span>
<span style=color:#111>}</span>

<span style=color:#75715e>// randomFormat returns one of a set of greeting messages. The returned message
</span><span style=color:#75715e>// is selected at random.
</span><span style=color:#75715e></span><span style=color:#00a8c8>func</span> <span style=color:#75af00>randomFormat</span><span style=color:#111>()</span> <span style=color:#00a8c8>string</span> <span style=color:#111>{</span>
	<span style=color:#75715e>// A slice of message formats.
</span><span style=color:#75715e></span>	<span style=color:#75af00>formats</span> <span style=color:#f92672>:=</span> <span style=color:#111>[]</span><span style=color:#00a8c8>string</span><span style=color:#111>{</span>
		<span style=color:#d88200>&#34;Hi, %v. Welcome!&#34;</span><span style=color:#111>,</span>
		<span style=color:#d88200>&#34;Great to see you, %v!&#34;</span><span style=color:#111>,</span>
		<span style=color:#d88200>&#34;Hail, %v! Well met!&#34;</span><span style=color:#111>,</span>
	<span style=color:#111>}</span>

	<span style=color:#75715e>// Return a randomly selected message format by specifying a random index
</span><span style=color:#75715e></span>	<span style=color:#75715e>// for the slice of formats.
</span><span style=color:#75715e></span>	<span style=color:#00a8c8>return</span> <span style=color:#75af00>formats</span><span style=color:#111>[</span><span style=color:#75af00>rand</span><span style=color:#111>.</span><span style=color:#75af00>Intn</span><span style=color:#111>(</span><span style=color:#111>len</span><span style=color:#111>(</span><span style=color:#75af00>formats</span><span style=color:#111>))]</span>
<span style=color:#111>}</span>
</code></pre></div><p><code>hello.go</code>：</p>
<div class=highlight><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=color:#75af00>message</span><span style=color:#111>,</span> <span style=color:#75af00>err</span> <span style=color:#f92672>:=</span> <span style=color:#75af00>greetings</span><span style=color:#111>.</span><span style=color:#75af00>Hello</span><span style=color:#111>(</span><span style=color:#d88200>&#34;Gladys&#34;</span><span style=color:#111>)</span>
</code></pre></div><h3 id=多人问候>多人问候</h3>
<p><code>greetings.go</code>：</p>
<div class=highlight><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=color:#f92672>package</span> <span style=color:#75af00>greetings</span>

<span style=color:#f92672>import</span> <span style=color:#111>(</span>
	<span style=color:#d88200>&#34;errors&#34;</span>
	<span style=color:#d88200>&#34;fmt&#34;</span>
	<span style=color:#d88200>&#34;math/rand&#34;</span>
	<span style=color:#d88200>&#34;time&#34;</span>
<span style=color:#111>)</span>

<span style=color:#75715e>// Hello returns a greeting for the named person
</span><span style=color:#75715e></span><span style=color:#00a8c8>func</span> <span style=color:#75af00>Hello</span><span style=color:#111>(</span><span style=color:#75af00>name</span> <span style=color:#00a8c8>string</span><span style=color:#111>)</span> <span style=color:#111>(</span><span style=color:#00a8c8>string</span><span style=color:#111>,</span> <span style=color:#00a8c8>error</span><span style=color:#111>)</span> <span style=color:#111>{</span>
	<span style=color:#75715e>// If no name was given, return an error with a message.
</span><span style=color:#75715e></span>	<span style=color:#00a8c8>if</span> <span style=color:#75af00>name</span> <span style=color:#f92672>==</span> <span style=color:#d88200>&#34;&#34;</span> <span style=color:#111>{</span>
		<span style=color:#00a8c8>return</span> <span style=color:#d88200>&#34;&#34;</span><span style=color:#111>,</span> <span style=color:#75af00>errors</span><span style=color:#111>.</span><span style=color:#75af00>New</span><span style=color:#111>(</span><span style=color:#d88200>&#34;empty name&#34;</span><span style=color:#111>)</span>
	<span style=color:#111>}</span>

	<span style=color:#75715e>// If a name was received, Return a greeting that embeds the the in a
</span><span style=color:#75715e></span>	<span style=color:#75715e>// message.
</span><span style=color:#75715e></span>	<span style=color:#75af00>message</span> <span style=color:#f92672>:=</span> <span style=color:#75af00>fmt</span><span style=color:#111>.</span><span style=color:#75af00>Sprintf</span><span style=color:#111>(</span><span style=color:#75af00>randomFormat</span><span style=color:#111>(),</span> <span style=color:#75af00>name</span><span style=color:#111>)</span>
	<span style=color:#00a8c8>return</span> <span style=color:#75af00>message</span><span style=color:#111>,</span> <span style=color:#00a8c8>nil</span>
<span style=color:#111>}</span>

<span style=color:#75715e>// Hellos returns a map that associates each of the named people with a greeting
</span><span style=color:#75715e>// message.
</span><span style=color:#75715e></span><span style=color:#00a8c8>func</span> <span style=color:#75af00>Hellos</span><span style=color:#111>(</span><span style=color:#75af00>names</span> <span style=color:#111>[]</span><span style=color:#00a8c8>string</span><span style=color:#111>)</span> <span style=color:#111>(</span><span style=color:#00a8c8>map</span><span style=color:#111>[</span><span style=color:#00a8c8>string</span><span style=color:#111>]</span><span style=color:#00a8c8>string</span><span style=color:#111>,</span> <span style=color:#00a8c8>error</span><span style=color:#111>)</span> <span style=color:#111>{</span>
	<span style=color:#75715e>// A map to associate names with messages.
</span><span style=color:#75715e></span>	<span style=color:#75af00>messages</span> <span style=color:#f92672>:=</span> <span style=color:#111>make</span><span style=color:#111>(</span><span style=color:#00a8c8>map</span><span style=color:#111>[</span><span style=color:#00a8c8>string</span><span style=color:#111>]</span><span style=color:#00a8c8>string</span><span style=color:#111>)</span>
	<span style=color:#75715e>// Loop through the received slice of names, calling the Hello function to
</span><span style=color:#75715e></span>	<span style=color:#75715e>// get a message for each name.
</span><span style=color:#75715e></span>	<span style=color:#00a8c8>for</span> <span style=color:#75af00>_</span><span style=color:#111>,</span> <span style=color:#75af00>name</span> <span style=color:#f92672>:=</span> <span style=color:#00a8c8>range</span> <span style=color:#75af00>names</span> <span style=color:#111>{</span>
		<span style=color:#75af00>message</span><span style=color:#111>,</span> <span style=color:#75af00>err</span> <span style=color:#f92672>:=</span> <span style=color:#75af00>Hello</span><span style=color:#111>(</span><span style=color:#75af00>name</span><span style=color:#111>)</span>
		<span style=color:#00a8c8>if</span> <span style=color:#75af00>err</span> <span style=color:#f92672>!=</span> <span style=color:#00a8c8>nil</span> <span style=color:#111>{</span>
			<span style=color:#00a8c8>return</span> <span style=color:#00a8c8>nil</span><span style=color:#111>,</span> <span style=color:#75af00>err</span>
		<span style=color:#111>}</span>
		<span style=color:#75715e>// In the map, associate the retrieved message with the name.
</span><span style=color:#75715e></span>		<span style=color:#75af00>messages</span><span style=color:#111>[</span><span style=color:#75af00>name</span><span style=color:#111>]</span> <span style=color:#111>=</span> <span style=color:#75af00>message</span>
	<span style=color:#111>}</span>
	<span style=color:#00a8c8>return</span> <span style=color:#75af00>messages</span><span style=color:#111>,</span> <span style=color:#00a8c8>nil</span>
<span style=color:#111>}</span>
</code></pre></div><p><code>hello.go</code></p>
<div class=highlight><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=color:#00a8c8>func</span> <span style=color:#75af00>main</span><span style=color:#111>()</span> <span style=color:#111>{</span>
	<span style=color:#75715e>// Set properties of the predefined Logger, including the log
</span><span style=color:#75715e></span>	<span style=color:#75715e>// entry prefix and a flag to disable printing the time, source
</span><span style=color:#75715e></span>	<span style=color:#75715e>// file, and line number.
</span><span style=color:#75715e></span>	<span style=color:#75af00>log</span><span style=color:#111>.</span><span style=color:#75af00>SetPrefix</span><span style=color:#111>(</span><span style=color:#d88200>&#34;greetings: &#34;</span><span style=color:#111>)</span>
	<span style=color:#75af00>log</span><span style=color:#111>.</span><span style=color:#75af00>SetFlags</span><span style=color:#111>(</span><span style=color:#ae81ff>0</span><span style=color:#111>)</span>

	<span style=color:#75715e>// A slice of names.
</span><span style=color:#75715e></span>	<span style=color:#75af00>names</span> <span style=color:#f92672>:=</span> <span style=color:#111>[]</span><span style=color:#00a8c8>string</span><span style=color:#111>{</span><span style=color:#d88200>&#34;Gladys&#34;</span><span style=color:#111>,</span> <span style=color:#d88200>&#34;Samantha&#34;</span><span style=color:#111>,</span> <span style=color:#d88200>&#34;Darrin&#34;</span><span style=color:#111>}</span>

	<span style=color:#75715e>// Request greeting messages for the names.
</span><span style=color:#75715e></span>	<span style=color:#75af00>messages</span><span style=color:#111>,</span> <span style=color:#75af00>err</span> <span style=color:#f92672>:=</span> <span style=color:#75af00>greetings</span><span style=color:#111>.</span><span style=color:#75af00>Hellos</span><span style=color:#111>(</span><span style=color:#75af00>names</span><span style=color:#111>)</span>
	<span style=color:#75715e>// If an error was returned, print it to the console and exit the program.
</span><span style=color:#75715e></span>	<span style=color:#00a8c8>if</span> <span style=color:#75af00>err</span> <span style=color:#f92672>!=</span> <span style=color:#00a8c8>nil</span> <span style=color:#111>{</span>
		<span style=color:#75af00>log</span><span style=color:#111>.</span><span style=color:#75af00>Fatal</span><span style=color:#111>(</span><span style=color:#75af00>err</span><span style=color:#111>)</span>
	<span style=color:#111>}</span>

	<span style=color:#75715e>// If no error was returned, print the returned message to the massage.
</span><span style=color:#75715e></span>	<span style=color:#75af00>fmt</span><span style=color:#111>.</span><span style=color:#75af00>Println</span><span style=color:#111>(</span><span style=color:#75af00>messages</span><span style=color:#111>)</span>
<span style=color:#111>}</span>
</code></pre></div><h3 id=测试>测试</h3>
<p><code>greetings_test.go</code>：</p>
<div class=highlight><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=color:#f92672>package</span> <span style=color:#75af00>greetings</span>

<span style=color:#f92672>import</span> <span style=color:#111>(</span>
	<span style=color:#d88200>&#34;regexp&#34;</span>
	<span style=color:#d88200>&#34;testing&#34;</span>
<span style=color:#111>)</span>

<span style=color:#75715e>// TestHelloName calls greetings.Hello with a name, cheking for a vaild return
</span><span style=color:#75715e>// value.
</span><span style=color:#75715e></span><span style=color:#00a8c8>func</span> <span style=color:#75af00>TestHelloName</span><span style=color:#111>(</span><span style=color:#75af00>t</span> <span style=color:#f92672>*</span><span style=color:#75af00>testing</span><span style=color:#111>.</span><span style=color:#75af00>T</span><span style=color:#111>)</span> <span style=color:#111>{</span>
	<span style=color:#75af00>name</span> <span style=color:#f92672>:=</span> <span style=color:#d88200>&#34;Gladys&#34;</span>
	<span style=color:#75af00>want</span> <span style=color:#f92672>:=</span> <span style=color:#75af00>regexp</span><span style=color:#111>.</span><span style=color:#75af00>MustCompile</span><span style=color:#111>(</span><span style=color:#d88200>`\b`</span> <span style=color:#f92672>+</span> <span style=color:#75af00>name</span> <span style=color:#f92672>+</span> <span style=color:#d88200>`\b`</span><span style=color:#111>)</span>
	<span style=color:#75af00>msg</span><span style=color:#111>,</span> <span style=color:#75af00>err</span> <span style=color:#f92672>:=</span> <span style=color:#75af00>Hello</span><span style=color:#111>(</span><span style=color:#d88200>&#34;Gladys&#34;</span><span style=color:#111>)</span>
	<span style=color:#00a8c8>if</span> <span style=color:#111>!</span><span style=color:#75af00>want</span><span style=color:#111>.</span><span style=color:#75af00>MatchString</span><span style=color:#111>(</span><span style=color:#75af00>msg</span><span style=color:#111>)</span> <span style=color:#f92672>||</span> <span style=color:#75af00>err</span> <span style=color:#f92672>!=</span> <span style=color:#00a8c8>nil</span> <span style=color:#111>{</span>
		<span style=color:#75af00>t</span><span style=color:#111>.</span><span style=color:#75af00>Fatalf</span><span style=color:#111>(</span><span style=color:#d88200>`Hello(&#34;Gladys&#34;) = %q, %v, want match for %#q, nil`</span><span style=color:#111>,</span>
			<span style=color:#75af00>msg</span><span style=color:#111>,</span> <span style=color:#75af00>err</span><span style=color:#111>,</span> <span style=color:#75af00>want</span><span style=color:#111>)</span>
	<span style=color:#111>}</span>
<span style=color:#111>}</span>

<span style=color:#75715e>// TestHelloEmpty calls greetings.Hello with an empty string, checking for an
</span><span style=color:#75715e>// error.
</span><span style=color:#75715e></span><span style=color:#00a8c8>func</span> <span style=color:#75af00>TestHelloEmpty</span><span style=color:#111>(</span><span style=color:#75af00>t</span> <span style=color:#f92672>*</span><span style=color:#75af00>testing</span><span style=color:#111>.</span><span style=color:#75af00>T</span><span style=color:#111>)</span> <span style=color:#111>{</span>
	<span style=color:#75af00>msg</span><span style=color:#111>,</span> <span style=color:#75af00>err</span> <span style=color:#f92672>:=</span> <span style=color:#75af00>Hello</span><span style=color:#111>(</span><span style=color:#d88200>&#34;&#34;</span><span style=color:#111>)</span>
	<span style=color:#00a8c8>if</span> <span style=color:#75af00>msg</span> <span style=color:#f92672>!=</span> <span style=color:#d88200>&#34;&#34;</span> <span style=color:#f92672>||</span> <span style=color:#75af00>err</span> <span style=color:#f92672>==</span> <span style=color:#00a8c8>nil</span> <span style=color:#111>{</span>
		<span style=color:#75af00>t</span><span style=color:#111>.</span><span style=color:#75af00>Fatalf</span><span style=color:#111>(</span><span style=color:#d88200>`Hello(&#34;&#34;) = %q, %v, want &#34;&#34;, error`</span><span style=color:#111>,</span> <span style=color:#75af00>msg</span><span style=color:#111>,</span> <span style=color:#75af00>err</span><span style=color:#111>)</span>
	<span style=color:#111>}</span>
<span style=color:#111>}</span>
</code></pre></div><h3 id=编译安装>编译安装</h3>
<p>编译：</p>
<div class=highlight><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>go build

./hello
</code></pre></div><p>安装：</p>
<div class=highlight><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=color:#75715e># 显示安装目录</span>
go list -f <span style=color:#d88200>&#39;{{ .Target }}&#39;</span>

<span style=color:#75715e># 配置环境变量</span>
<span style=color:#111>export</span> <span style=color:#111>PATH</span><span style=color:#f92672>=</span><span style=color:#111>$PATH</span>:/path/to/your/install/directory
<span style=color:#75715e># 安装</span>
go install

<span style=color:#75715e># 运行</span>
hello
</code></pre></div>
<div class=row><div class="position-relative mx-auto col-lg-9">
<div class="bg-primary overflow-hidden p-3 mt-5 shadow">
<h4 class="text-white text-center">阅读更多</h4>
<div class="d-flex justify-content-center"><a class="p-1 mr-3 d-inline-block text-white" href=/learning-notes/golang/go-install/ title="Go 安装"><i class="fas fa-chevron-left p-1"></i>Go 安装</a>
<a class="p-1 ml-3 d-inline-block text-white text-right" href=/operation-guide/ title=操作指南>操作指南<i class="fas fa-chevron-right p-1"></i></a>
</div>
</div>
</div></div>
</div>
</div>
</div>
<script src=https://www.shisanshiji.com/lib/jquery.min.js></script>
<script src=https://www.shisanshiji.com/lib/popper.min.js></script>
<script src=https://www.shisanshiji.com/js/bootstrap.min.js></script>
<script type=text/javascript src=/plugins/lunr.min.js></script>
<script type=text/javascript src=/plugins/auto-complete.js></script>
<link href=/plugins/auto-complete.css rel=stylesheet>
<script type=text/javascript>var baseurl="https://www.shisanshiji.com/"</script>
<script type=text/javascript src=/plugins/search.js></script>
<script type=text/javascript src=/plugins/clipboard.js></script>
<script>new ClipboardJS('.btn')</script>
</body>
</html>