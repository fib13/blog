<!doctype html><html><head>
<meta charset=utf-8>
<meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no">
<link rel=canonical href=https://www.shisanshiji.com/learning-notes/golang/go-tutorial/>
<title>
Golang 教程 | 十三时记
</title>
<link href=https://www.shisanshiji.com/css/fontawesome.min.css rel=stylesheet>
<link rel=stylesheet href=https://www.shisanshiji.com/css/ace.min.css>
<link rel=icon href=https://www.shisanshiji.com/img/favicon.png type=image/x-icon>
</head>
<body><nav class="navbar navbar-expand-lg navbar-dark bg-primary shadow sticky-top" id=navbarMain>
<div class=container>
<div>
<a class=navbar-brand href=/>
十三时记
</a>
</div>
<button class="navbar-toggler navbar-toggler-right collapsed" type=button data-toggle=collapse data-target=#navbarMainCollapse aria-controls=navbarMainCollapse aria-expanded=false aria-label="Toggle navigation">
<span class=navbar-toggler-icon></span>
</button>
<div class="collapse navbar-collapse" id=navbarMainCollapse>
<ul class="navbar-nav ml-auto">
<li class=nav-item>
<a class=nav-link href=https://github.com/jugggao target=_blank>
<i class="fab fa-github"></i>
</a>
</li>
</ul>
</div>
</div>
</nav>
<div class=container-fluid>
<div class=row>
<div class="docs-sidenav order-0 col-12 col-md-3 col-lg-2 col-xl-2 position-sticky border-right"><nav class="navbar navbar-expand-md navbar-light pl-0">
<button class="navbar-toggler navbar-toggler-right collapsed" type=button data-toggle=collapse data-target=#sidenav-left-collapse aria-controls=sidenav-left-collapse aria-expanded=false aria-label="Toggle navigation">
<span class=navbar-toggler-icon></span>
</button>
<div class="collapse navbar-collapse align-items-start flex-column" id=sidenav-left-collapse>
<form class="form-inline my-2 my-lg-0 searchbox">
<input class="form-control mr-sm-2 w-100" data-search-input id=search-by type=text placeholder=Search>
</form>
<ul class="navbar-nav flex-column pt-3">
<li data-nav-id=/learning-notes/ class="nav-item my-1 parent haschildren">
<a class="nav-link p-0" href=/learning-notes/><h6>学习笔记</h6></a>
<ul class="list-unstyled ml-2">
<li data-nav-id=/learning-notes/golang/ class="nav-item my-1 parent haschildren">
<a class="nav-link p-0" href=/learning-notes/golang/><h6>Golang 学习笔记</h6></a>
<ul class="list-unstyled ml-2">
<li data-nav-id=/learning-notes/golang/go-install/ class="nav-item my-1">
<a href=/learning-notes/golang/go-install/ class="nav-link p-0">
Go 安装
</a>
</li>
<li data-nav-id=/learning-notes/golang/go-tutorial/ class="nav-item my-1 active">
<a href=/learning-notes/golang/go-tutorial/ class="nav-link p-0">
Golang 教程
</a>
</li>
</ul>
</li>
</ul>
</li>
<li data-nav-id=/operation-guide/ class="nav-item my-1 haschildren">
<a class="nav-link p-0" href=/operation-guide/><h6>操作指南</h6></a>
<ul class="list-unstyled ml-2">
<li data-nav-id=/operation-guide/hugo-githubactiongithub-pages-%E6%90%AD%E5%BB%BA%E4%B8%AA%E4%BA%BA%E5%8D%9A%E5%AE%A2/ class="nav-item my-1">
<a href=/operation-guide/hugo-githubactiongithub-pages-%E6%90%AD%E5%BB%BA%E4%B8%AA%E4%BA%BA%E5%8D%9A%E5%AE%A2/ class="nav-link p-0">
Hugo&Github Action&Github Pages 搭建个人博客
</a>
</li>
<li data-nav-id=/operation-guide/kubernetes-%E5%BA%94%E7%94%A8%E4%BD%BF%E7%94%A8-keycloak-%E4%B8%8E-oauth2-proxy-%E8%BF%9B%E8%A1%8C%E8%AE%A4%E8%AF%81/ class="nav-item my-1">
<a href=/operation-guide/kubernetes-%E5%BA%94%E7%94%A8%E4%BD%BF%E7%94%A8-keycloak-%E4%B8%8E-oauth2-proxy-%E8%BF%9B%E8%A1%8C%E8%AE%A4%E8%AF%81/ class="nav-link p-0">
使用 Keycloak 与 Oauth2-Proxy 认证 Kubernetes 应用
</a>
</li>
</ul>
</li>
<li data-nav-id=/troubleshooting/ class="nav-item my-1 haschildren">
<a class="nav-link p-0" href=/troubleshooting/><h6>问题排查</h6></a>
<ul class="list-unstyled ml-2">
<li data-nav-id=/troubleshooting/elasticsearch-troubleshooting/ class="nav-item my-1">
<a href=/troubleshooting/elasticsearch-troubleshooting/ class="nav-link p-0">
Elasticsearch 问题排查
</a>
</li>
</ul>
</li>
<li data-nav-id=/devops/ class="nav-item my-1 haschildren">
<a class="nav-link p-0" href=/devops/><h6>DevOps</h6></a>
<ul class="list-unstyled ml-2">
<li data-nav-id=/devops/chef/ class="nav-item my-1 haschildren">
<a class="nav-link p-0" href=/devops/chef/><h6>Tekton CICD</h6></a>
<ul class="list-unstyled ml-2">
<li data-nav-id=/devops/chef/getting-started-with-automation/ class="nav-item my-1">
<a href=/devops/chef/getting-started-with-automation/ class="nav-link p-0">
Chef - 自动化服务器配置管理工具入门
</a>
</li>
</ul>
</li>
<li data-nav-id=/devops/tekton/ class="nav-item my-1 haschildren">
<a class="nav-link p-0" href=/devops/tekton/><h6>Tekton CICD</h6></a>
<ul class="list-unstyled ml-2">
<li data-nav-id=/devops/tekton/tekton-practice-task/ class="nav-item my-1">
<a href=/devops/tekton/tekton-practice-task/ class="nav-link p-0">
Tekton 实践：安装
</a>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</nav>
</div>
<div class="docs-toc large order-lg-2 order-md-0 order-xs-1 col-12 col-lg-2 col-xl-2 position-sticky border-left"><div class=docs-toc>
<nav id=TableOfContents>
<ul>
<li><a href=#教程开始>教程：开始</a></li>
<li><a href=#教程创建一个-go-模块>教程：创建一个 Go 模块</a>
<ul>
<li><a href=#创建模块>创建模块</a></li>
<li><a href=#调用其他模块>调用其他模块</a></li>
<li><a href=#错误处理>错误处理</a></li>
<li><a href=#随机问候>随机问候</a></li>
<li><a href=#多人问候>多人问候</a></li>
<li><a href=#测试>测试</a></li>
<li><a href=#编译安装>编译安装</a></li>
</ul>
</li>
<li><a href=#教程访问关系型数据库>教程：访问关系型数据库</a>
<ul>
<li><a href=#准备>准备</a></li>
<li><a href=#初始化数据库>初始化数据库</a></li>
<li><a href=#获取数据库句柄并链接>获取数据库句柄并链接</a></li>
<li><a href=#查询多行>查询多行</a></li>
<li><a href=#查询单行>查询单行</a></li>
</ul>
</li>
<li><a href=#添加数据>添加数据</a></li>
<li><a href=#教程使用-gin-开发-restful-api>教程：使用 Gin 开发 RESTful API</a>
<ul>
<li><a href=#创建数据>创建数据</a></li>
<li><a href=#返回所有数据>返回所有数据</a></li>
<li><a href=#添加新项>添加新项</a></li>
<li><a href=#返回特定项>返回特定项</a></li>
<li><a href=#完整代码>完整代码</a></li>
</ul>
</li>
</ul>
</nav>
</div>
</div>
<div class="main col-12 order-1 col-md-9 col-lg-10 col-xl-8 py-3">
<h1>Golang 教程</h1>
<h2 id=教程开始>教程：开始</h2>
<div class=highlight><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>mkdir hello
<span style=color:#111>cd</span> hello

go mod init example/hello
vim hello.go
</code></pre></div><div class=highlight><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=color:#f92672>package</span> <span style=color:#75af00>main</span>

<span style=color:#f92672>import</span> <span style=color:#d88200>&#34;fmt&#34;</span>

<span style=color:#00a8c8>func</span> <span style=color:#75af00>main</span><span style=color:#111>()</span> <span style=color:#111>{</span>
    <span style=color:#75af00>fmt</span><span style=color:#111>.</span><span style=color:#75af00>Println</span><span style=color:#111>(</span><span style=color:#d88200>&#34;Hello, World!&#34;</span><span style=color:#111>)</span>
<span style=color:#111>}</span>
</code></pre></div><div class=highlight><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>go run .
</code></pre></div><p>引用外部包。</p>
<div class=highlight><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=color:#f92672>package</span> <span style=color:#75af00>main</span>

<span style=color:#f92672>import</span> <span style=color:#d88200>&#34;fmt&#34;</span>

<span style=color:#f92672>import</span> <span style=color:#d88200>&#34;rsc.io/quote&#34;</span>

<span style=color:#00a8c8>func</span> <span style=color:#75af00>main</span><span style=color:#111>()</span> <span style=color:#111>{</span>
    <span style=color:#75af00>fmt</span><span style=color:#111>.</span><span style=color:#75af00>Println</span><span style=color:#111>(</span><span style=color:#75af00>quote</span><span style=color:#111>.</span><span style=color:#75af00>Go</span><span style=color:#111>())</span>
<span style=color:#111>}</span>
</code></pre></div><p>下载外部包，并在 <code>go.mod</code> 中添加依赖以及生成认证文件 <code>go.sum</code>。</p>
<div class=highlight><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>go mod tidy
</code></pre></div><h2 id=教程创建一个-go-模块>教程：创建一个 Go 模块</h2>
<h3 id=创建模块>创建模块</h3>
<div class=highlight><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>mkdir greetings
<span style=color:#111>cd</span> greetings/

go mod init example.com/greetings

vim greetings.go
</code></pre></div><div class=highlight><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=color:#f92672>package</span> <span style=color:#75af00>greetings</span>

<span style=color:#f92672>import</span> <span style=color:#d88200>&#34;fmt&#34;</span>

<span style=color:#75715e>// Hello returns a greeting for the named person
</span><span style=color:#75715e></span><span style=color:#00a8c8>func</span> <span style=color:#75af00>Hello</span><span style=color:#111>(</span><span style=color:#75af00>name</span> <span style=color:#00a8c8>string</span><span style=color:#111>)</span> <span style=color:#00a8c8>string</span> <span style=color:#111>{</span>
    <span style=color:#75715e>// Return a greeting that embeds the the in a message.
</span><span style=color:#75715e></span>    <span style=color:#75af00>message</span> <span style=color:#f92672>:=</span> <span style=color:#75af00>fmt</span><span style=color:#111>.</span><span style=color:#75af00>Sprintf</span><span style=color:#111>(</span><span style=color:#d88200>&#34;Hi, %v. Welcome!&#34;</span><span style=color:#111>,</span> <span style=color:#75af00>name</span><span style=color:#111>)</span>
    <span style=color:#00a8c8>return</span> <span style=color:#75af00>message</span>
<span style=color:#111>}</span>
</code></pre></div><h3 id=调用其他模块>调用其他模块</h3>
<p>此时目录结构为：</p>
<pre tabindex=0><code>.
├── greetings
└── hello
</code></pre><div class=highlight><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=color:#111>cd</span> hello
rm -rf *

go mod init example.com/hello

vim hello.go
</code></pre></div><div class=highlight><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=color:#f92672>package</span> <span style=color:#75af00>main</span>

<span style=color:#f92672>import</span> <span style=color:#111>(</span>
	<span style=color:#d88200>&#34;fmt&#34;</span>

	<span style=color:#d88200>&#34;example.com/greetings&#34;</span>
<span style=color:#111>)</span>

<span style=color:#00a8c8>func</span> <span style=color:#75af00>main</span><span style=color:#111>()</span> <span style=color:#111>{</span>
	<span style=color:#75715e>// Get a greeting message and print it.
</span><span style=color:#75715e></span>	<span style=color:#75af00>message</span> <span style=color:#f92672>:=</span> <span style=color:#75af00>greetings</span><span style=color:#111>.</span><span style=color:#75af00>Hello</span><span style=color:#111>(</span><span style=color:#d88200>&#34;Gladys&#34;</span><span style=color:#111>)</span>
	<span style=color:#75af00>fmt</span><span style=color:#111>.</span><span style=color:#75af00>Println</span><span style=color:#111>(</span><span style=color:#75af00>message</span><span style=color:#111>)</span>
<span style=color:#111>}</span>
</code></pre></div><p>重定向 Go 模块路径并添加依赖：</p>
<div class=highlight><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>go mod edit -replace example.com/greetings<span style=color:#f92672>=</span>../greetings

go mod tidy
</code></pre></div><p>运行：</p>
<div class=highlight><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>go run .
</code></pre></div><h3 id=错误处理>错误处理</h3>
<p><code>greetings.go</code>：</p>
<div class=highlight><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=color:#f92672>package</span> <span style=color:#75af00>greetings</span>

<span style=color:#f92672>import</span> <span style=color:#111>(</span>
	<span style=color:#d88200>&#34;errors&#34;</span>
	<span style=color:#d88200>&#34;fmt&#34;</span>
<span style=color:#111>)</span>

<span style=color:#75715e>// Hello returns a greeting for the named person
</span><span style=color:#75715e></span><span style=color:#00a8c8>func</span> <span style=color:#75af00>Hello</span><span style=color:#111>(</span><span style=color:#75af00>name</span> <span style=color:#00a8c8>string</span><span style=color:#111>)</span> <span style=color:#111>(</span><span style=color:#00a8c8>string</span><span style=color:#111>,</span> <span style=color:#00a8c8>error</span><span style=color:#111>)</span> <span style=color:#111>{</span>
	<span style=color:#75715e>// If no name was given, return an error with a message.
</span><span style=color:#75715e></span>	<span style=color:#00a8c8>if</span> <span style=color:#75af00>name</span> <span style=color:#f92672>==</span> <span style=color:#d88200>&#34;&#34;</span> <span style=color:#111>{</span>
		<span style=color:#00a8c8>return</span> <span style=color:#d88200>&#34;&#34;</span><span style=color:#111>,</span> <span style=color:#75af00>errors</span><span style=color:#111>.</span><span style=color:#75af00>New</span><span style=color:#111>(</span><span style=color:#d88200>&#34;empty name&#34;</span><span style=color:#111>)</span>
	<span style=color:#111>}</span>

	<span style=color:#75715e>// If a name was received, Return a greeting that embeds the the
</span><span style=color:#75715e></span>	<span style=color:#75715e>// in a message.
</span><span style=color:#75715e></span>	<span style=color:#75af00>message</span> <span style=color:#f92672>:=</span> <span style=color:#75af00>fmt</span><span style=color:#111>.</span><span style=color:#75af00>Sprintf</span><span style=color:#111>(</span><span style=color:#d88200>&#34;Hi, %v. Welcome!&#34;</span><span style=color:#111>,</span> <span style=color:#75af00>name</span><span style=color:#111>)</span>
	<span style=color:#00a8c8>return</span> <span style=color:#75af00>message</span><span style=color:#111>,</span> <span style=color:#00a8c8>nil</span>
<span style=color:#111>}</span>
</code></pre></div><p><code>hello.go</code>：</p>
<div class=highlight><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=color:#f92672>package</span> <span style=color:#75af00>main</span>

<span style=color:#f92672>import</span> <span style=color:#111>(</span>
	<span style=color:#d88200>&#34;fmt&#34;</span>
	<span style=color:#d88200>&#34;log&#34;</span>

	<span style=color:#d88200>&#34;example.com/greetings&#34;</span>
<span style=color:#111>)</span>

<span style=color:#00a8c8>func</span> <span style=color:#75af00>main</span><span style=color:#111>()</span> <span style=color:#111>{</span>
	<span style=color:#75715e>// Set properties of the predefined Logger, including the log
</span><span style=color:#75715e></span>	<span style=color:#75715e>// entry prefix and a flag to disable printing the time, source
</span><span style=color:#75715e></span>	<span style=color:#75715e>// file, and line number.
</span><span style=color:#75715e></span>	<span style=color:#75af00>log</span><span style=color:#111>.</span><span style=color:#75af00>SetPrefix</span><span style=color:#111>(</span><span style=color:#d88200>&#34;greetings: &#34;</span><span style=color:#111>)</span>
	<span style=color:#75af00>log</span><span style=color:#111>.</span><span style=color:#75af00>SetFlags</span><span style=color:#111>(</span><span style=color:#ae81ff>0</span><span style=color:#111>)</span>

	<span style=color:#75715e>// Request a greeting message.
</span><span style=color:#75715e></span>	<span style=color:#75af00>message</span><span style=color:#111>,</span> <span style=color:#75af00>err</span> <span style=color:#f92672>:=</span> <span style=color:#75af00>greetings</span><span style=color:#111>.</span><span style=color:#75af00>Hello</span><span style=color:#111>(</span><span style=color:#d88200>&#34;&#34;</span><span style=color:#111>)</span>
	<span style=color:#75715e>// If an error was returned, print it to the console and exit the program.
</span><span style=color:#75715e></span>	<span style=color:#00a8c8>if</span> <span style=color:#75af00>err</span> <span style=color:#f92672>!=</span> <span style=color:#00a8c8>nil</span> <span style=color:#111>{</span>
		<span style=color:#75af00>log</span><span style=color:#111>.</span><span style=color:#75af00>Fatal</span><span style=color:#111>(</span><span style=color:#75af00>err</span><span style=color:#111>)</span>
	<span style=color:#111>}</span>

	<span style=color:#75715e>// If no error was returned, print the returned message to the massage.
</span><span style=color:#75715e></span>	<span style=color:#75af00>fmt</span><span style=color:#111>.</span><span style=color:#75af00>Println</span><span style=color:#111>(</span><span style=color:#75af00>message</span><span style=color:#111>)</span>
<span style=color:#111>}</span>
</code></pre></div><h3 id=随机问候>随机问候</h3>
<p><code>greetings.go</code>:</p>
<div class=highlight><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=color:#f92672>package</span> <span style=color:#75af00>greetings</span>

<span style=color:#f92672>import</span> <span style=color:#111>(</span>
	<span style=color:#d88200>&#34;errors&#34;</span>
	<span style=color:#d88200>&#34;fmt&#34;</span>
	<span style=color:#d88200>&#34;math/rand&#34;</span>
	<span style=color:#d88200>&#34;time&#34;</span>
<span style=color:#111>)</span>

<span style=color:#75715e>// Hello returns a greeting for the named person
</span><span style=color:#75715e></span><span style=color:#00a8c8>func</span> <span style=color:#75af00>Hello</span><span style=color:#111>(</span><span style=color:#75af00>name</span> <span style=color:#00a8c8>string</span><span style=color:#111>)</span> <span style=color:#111>(</span><span style=color:#00a8c8>string</span><span style=color:#111>,</span> <span style=color:#00a8c8>error</span><span style=color:#111>)</span> <span style=color:#111>{</span>
	<span style=color:#75715e>// If no name was given, return an error with a message.
</span><span style=color:#75715e></span>	<span style=color:#00a8c8>if</span> <span style=color:#75af00>name</span> <span style=color:#f92672>==</span> <span style=color:#d88200>&#34;&#34;</span> <span style=color:#111>{</span>
		<span style=color:#00a8c8>return</span> <span style=color:#d88200>&#34;&#34;</span><span style=color:#111>,</span> <span style=color:#75af00>errors</span><span style=color:#111>.</span><span style=color:#75af00>New</span><span style=color:#111>(</span><span style=color:#d88200>&#34;empty name&#34;</span><span style=color:#111>)</span>
	<span style=color:#111>}</span>

	<span style=color:#75715e>// If a name was received, Return a greeting that embeds the the in a
</span><span style=color:#75715e></span>	<span style=color:#75715e>// message.
</span><span style=color:#75715e></span>	<span style=color:#75af00>message</span> <span style=color:#f92672>:=</span> <span style=color:#75af00>fmt</span><span style=color:#111>.</span><span style=color:#75af00>Sprintf</span><span style=color:#111>(</span><span style=color:#75af00>randomFormat</span><span style=color:#111>(),</span> <span style=color:#75af00>name</span><span style=color:#111>)</span>
	<span style=color:#00a8c8>return</span> <span style=color:#75af00>message</span><span style=color:#111>,</span> <span style=color:#00a8c8>nil</span>
<span style=color:#111>}</span>

<span style=color:#75715e>// init sets initial values for variables used in the fuction.
</span><span style=color:#75715e></span><span style=color:#00a8c8>func</span> <span style=color:#75af00>init</span><span style=color:#111>()</span> <span style=color:#111>{</span>
	<span style=color:#75af00>rand</span><span style=color:#111>.</span><span style=color:#75af00>Seed</span><span style=color:#111>(</span><span style=color:#75af00>time</span><span style=color:#111>.</span><span style=color:#75af00>Now</span><span style=color:#111>().</span><span style=color:#75af00>UnixNano</span><span style=color:#111>())</span>
<span style=color:#111>}</span>

<span style=color:#75715e>// randomFormat returns one of a set of greeting messages. The returned message
</span><span style=color:#75715e>// is selected at random.
</span><span style=color:#75715e></span><span style=color:#00a8c8>func</span> <span style=color:#75af00>randomFormat</span><span style=color:#111>()</span> <span style=color:#00a8c8>string</span> <span style=color:#111>{</span>
	<span style=color:#75715e>// A slice of message formats.
</span><span style=color:#75715e></span>	<span style=color:#75af00>formats</span> <span style=color:#f92672>:=</span> <span style=color:#111>[]</span><span style=color:#00a8c8>string</span><span style=color:#111>{</span>
		<span style=color:#d88200>&#34;Hi, %v. Welcome!&#34;</span><span style=color:#111>,</span>
		<span style=color:#d88200>&#34;Great to see you, %v!&#34;</span><span style=color:#111>,</span>
		<span style=color:#d88200>&#34;Hail, %v! Well met!&#34;</span><span style=color:#111>,</span>
	<span style=color:#111>}</span>

	<span style=color:#75715e>// Return a randomly selected message format by specifying a random index
</span><span style=color:#75715e></span>	<span style=color:#75715e>// for the slice of formats.
</span><span style=color:#75715e></span>	<span style=color:#00a8c8>return</span> <span style=color:#75af00>formats</span><span style=color:#111>[</span><span style=color:#75af00>rand</span><span style=color:#111>.</span><span style=color:#75af00>Intn</span><span style=color:#111>(</span><span style=color:#111>len</span><span style=color:#111>(</span><span style=color:#75af00>formats</span><span style=color:#111>))]</span>
<span style=color:#111>}</span>
</code></pre></div><p><code>hello.go</code>：</p>
<div class=highlight><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=color:#75af00>message</span><span style=color:#111>,</span> <span style=color:#75af00>err</span> <span style=color:#f92672>:=</span> <span style=color:#75af00>greetings</span><span style=color:#111>.</span><span style=color:#75af00>Hello</span><span style=color:#111>(</span><span style=color:#d88200>&#34;Gladys&#34;</span><span style=color:#111>)</span>
</code></pre></div><h3 id=多人问候>多人问候</h3>
<p><code>greetings.go</code>：</p>
<div class=highlight><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=color:#f92672>package</span> <span style=color:#75af00>greetings</span>

<span style=color:#f92672>import</span> <span style=color:#111>(</span>
	<span style=color:#d88200>&#34;errors&#34;</span>
	<span style=color:#d88200>&#34;fmt&#34;</span>
	<span style=color:#d88200>&#34;math/rand&#34;</span>
	<span style=color:#d88200>&#34;time&#34;</span>
<span style=color:#111>)</span>

<span style=color:#75715e>// Hello returns a greeting for the named person
</span><span style=color:#75715e></span><span style=color:#00a8c8>func</span> <span style=color:#75af00>Hello</span><span style=color:#111>(</span><span style=color:#75af00>name</span> <span style=color:#00a8c8>string</span><span style=color:#111>)</span> <span style=color:#111>(</span><span style=color:#00a8c8>string</span><span style=color:#111>,</span> <span style=color:#00a8c8>error</span><span style=color:#111>)</span> <span style=color:#111>{</span>
	<span style=color:#75715e>// If no name was given, return an error with a message.
</span><span style=color:#75715e></span>	<span style=color:#00a8c8>if</span> <span style=color:#75af00>name</span> <span style=color:#f92672>==</span> <span style=color:#d88200>&#34;&#34;</span> <span style=color:#111>{</span>
		<span style=color:#00a8c8>return</span> <span style=color:#d88200>&#34;&#34;</span><span style=color:#111>,</span> <span style=color:#75af00>errors</span><span style=color:#111>.</span><span style=color:#75af00>New</span><span style=color:#111>(</span><span style=color:#d88200>&#34;empty name&#34;</span><span style=color:#111>)</span>
	<span style=color:#111>}</span>

	<span style=color:#75715e>// If a name was received, Return a greeting that embeds the the in a
</span><span style=color:#75715e></span>	<span style=color:#75715e>// message.
</span><span style=color:#75715e></span>	<span style=color:#75af00>message</span> <span style=color:#f92672>:=</span> <span style=color:#75af00>fmt</span><span style=color:#111>.</span><span style=color:#75af00>Sprintf</span><span style=color:#111>(</span><span style=color:#75af00>randomFormat</span><span style=color:#111>(),</span> <span style=color:#75af00>name</span><span style=color:#111>)</span>
	<span style=color:#00a8c8>return</span> <span style=color:#75af00>message</span><span style=color:#111>,</span> <span style=color:#00a8c8>nil</span>
<span style=color:#111>}</span>

<span style=color:#75715e>// Hellos returns a map that associates each of the named people with a greeting
</span><span style=color:#75715e>// message.
</span><span style=color:#75715e></span><span style=color:#00a8c8>func</span> <span style=color:#75af00>Hellos</span><span style=color:#111>(</span><span style=color:#75af00>names</span> <span style=color:#111>[]</span><span style=color:#00a8c8>string</span><span style=color:#111>)</span> <span style=color:#111>(</span><span style=color:#00a8c8>map</span><span style=color:#111>[</span><span style=color:#00a8c8>string</span><span style=color:#111>]</span><span style=color:#00a8c8>string</span><span style=color:#111>,</span> <span style=color:#00a8c8>error</span><span style=color:#111>)</span> <span style=color:#111>{</span>
	<span style=color:#75715e>// A map to associate names with messages.
</span><span style=color:#75715e></span>	<span style=color:#75af00>messages</span> <span style=color:#f92672>:=</span> <span style=color:#111>make</span><span style=color:#111>(</span><span style=color:#00a8c8>map</span><span style=color:#111>[</span><span style=color:#00a8c8>string</span><span style=color:#111>]</span><span style=color:#00a8c8>string</span><span style=color:#111>)</span>
	<span style=color:#75715e>// Loop through the received slice of names, calling the Hello function to
</span><span style=color:#75715e></span>	<span style=color:#75715e>// get a message for each name.
</span><span style=color:#75715e></span>	<span style=color:#00a8c8>for</span> <span style=color:#75af00>_</span><span style=color:#111>,</span> <span style=color:#75af00>name</span> <span style=color:#f92672>:=</span> <span style=color:#00a8c8>range</span> <span style=color:#75af00>names</span> <span style=color:#111>{</span>
		<span style=color:#75af00>message</span><span style=color:#111>,</span> <span style=color:#75af00>err</span> <span style=color:#f92672>:=</span> <span style=color:#75af00>Hello</span><span style=color:#111>(</span><span style=color:#75af00>name</span><span style=color:#111>)</span>
		<span style=color:#00a8c8>if</span> <span style=color:#75af00>err</span> <span style=color:#f92672>!=</span> <span style=color:#00a8c8>nil</span> <span style=color:#111>{</span>
			<span style=color:#00a8c8>return</span> <span style=color:#00a8c8>nil</span><span style=color:#111>,</span> <span style=color:#75af00>err</span>
		<span style=color:#111>}</span>
		<span style=color:#75715e>// In the map, associate the retrieved message with the name.
</span><span style=color:#75715e></span>		<span style=color:#75af00>messages</span><span style=color:#111>[</span><span style=color:#75af00>name</span><span style=color:#111>]</span> <span style=color:#111>=</span> <span style=color:#75af00>message</span>
	<span style=color:#111>}</span>
	<span style=color:#00a8c8>return</span> <span style=color:#75af00>messages</span><span style=color:#111>,</span> <span style=color:#00a8c8>nil</span>
<span style=color:#111>}</span>
</code></pre></div><p><code>hello.go</code></p>
<div class=highlight><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=color:#00a8c8>func</span> <span style=color:#75af00>main</span><span style=color:#111>()</span> <span style=color:#111>{</span>
	<span style=color:#75715e>// Set properties of the predefined Logger, including the log
</span><span style=color:#75715e></span>	<span style=color:#75715e>// entry prefix and a flag to disable printing the time, source
</span><span style=color:#75715e></span>	<span style=color:#75715e>// file, and line number.
</span><span style=color:#75715e></span>	<span style=color:#75af00>log</span><span style=color:#111>.</span><span style=color:#75af00>SetPrefix</span><span style=color:#111>(</span><span style=color:#d88200>&#34;greetings: &#34;</span><span style=color:#111>)</span>
	<span style=color:#75af00>log</span><span style=color:#111>.</span><span style=color:#75af00>SetFlags</span><span style=color:#111>(</span><span style=color:#ae81ff>0</span><span style=color:#111>)</span>

	<span style=color:#75715e>// A slice of names.
</span><span style=color:#75715e></span>	<span style=color:#75af00>names</span> <span style=color:#f92672>:=</span> <span style=color:#111>[]</span><span style=color:#00a8c8>string</span><span style=color:#111>{</span><span style=color:#d88200>&#34;Gladys&#34;</span><span style=color:#111>,</span> <span style=color:#d88200>&#34;Samantha&#34;</span><span style=color:#111>,</span> <span style=color:#d88200>&#34;Darrin&#34;</span><span style=color:#111>}</span>

	<span style=color:#75715e>// Request greeting messages for the names.
</span><span style=color:#75715e></span>	<span style=color:#75af00>messages</span><span style=color:#111>,</span> <span style=color:#75af00>err</span> <span style=color:#f92672>:=</span> <span style=color:#75af00>greetings</span><span style=color:#111>.</span><span style=color:#75af00>Hellos</span><span style=color:#111>(</span><span style=color:#75af00>names</span><span style=color:#111>)</span>
	<span style=color:#75715e>// If an error was returned, print it to the console and exit the program.
</span><span style=color:#75715e></span>	<span style=color:#00a8c8>if</span> <span style=color:#75af00>err</span> <span style=color:#f92672>!=</span> <span style=color:#00a8c8>nil</span> <span style=color:#111>{</span>
		<span style=color:#75af00>log</span><span style=color:#111>.</span><span style=color:#75af00>Fatal</span><span style=color:#111>(</span><span style=color:#75af00>err</span><span style=color:#111>)</span>
	<span style=color:#111>}</span>

	<span style=color:#75715e>// If no error was returned, print the returned message to the massage.
</span><span style=color:#75715e></span>	<span style=color:#75af00>fmt</span><span style=color:#111>.</span><span style=color:#75af00>Println</span><span style=color:#111>(</span><span style=color:#75af00>messages</span><span style=color:#111>)</span>
<span style=color:#111>}</span>
</code></pre></div><h3 id=测试>测试</h3>
<p><code>greetings_test.go</code>：</p>
<div class=highlight><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=color:#f92672>package</span> <span style=color:#75af00>greetings</span>

<span style=color:#f92672>import</span> <span style=color:#111>(</span>
	<span style=color:#d88200>&#34;regexp&#34;</span>
	<span style=color:#d88200>&#34;testing&#34;</span>
<span style=color:#111>)</span>

<span style=color:#75715e>// TestHelloName calls greetings.Hello with a name, cheking for a vaild return
</span><span style=color:#75715e>// value.
</span><span style=color:#75715e></span><span style=color:#00a8c8>func</span> <span style=color:#75af00>TestHelloName</span><span style=color:#111>(</span><span style=color:#75af00>t</span> <span style=color:#f92672>*</span><span style=color:#75af00>testing</span><span style=color:#111>.</span><span style=color:#75af00>T</span><span style=color:#111>)</span> <span style=color:#111>{</span>
	<span style=color:#75af00>name</span> <span style=color:#f92672>:=</span> <span style=color:#d88200>&#34;Gladys&#34;</span>
	<span style=color:#75af00>want</span> <span style=color:#f92672>:=</span> <span style=color:#75af00>regexp</span><span style=color:#111>.</span><span style=color:#75af00>MustCompile</span><span style=color:#111>(</span><span style=color:#d88200>`\b`</span> <span style=color:#f92672>+</span> <span style=color:#75af00>name</span> <span style=color:#f92672>+</span> <span style=color:#d88200>`\b`</span><span style=color:#111>)</span>
	<span style=color:#75af00>msg</span><span style=color:#111>,</span> <span style=color:#75af00>err</span> <span style=color:#f92672>:=</span> <span style=color:#75af00>Hello</span><span style=color:#111>(</span><span style=color:#d88200>&#34;Gladys&#34;</span><span style=color:#111>)</span>
	<span style=color:#00a8c8>if</span> <span style=color:#111>!</span><span style=color:#75af00>want</span><span style=color:#111>.</span><span style=color:#75af00>MatchString</span><span style=color:#111>(</span><span style=color:#75af00>msg</span><span style=color:#111>)</span> <span style=color:#f92672>||</span> <span style=color:#75af00>err</span> <span style=color:#f92672>!=</span> <span style=color:#00a8c8>nil</span> <span style=color:#111>{</span>
		<span style=color:#75af00>t</span><span style=color:#111>.</span><span style=color:#75af00>Fatalf</span><span style=color:#111>(</span><span style=color:#d88200>`Hello(&#34;Gladys&#34;) = %q, %v, want match for %#q, nil`</span><span style=color:#111>,</span>
			<span style=color:#75af00>msg</span><span style=color:#111>,</span> <span style=color:#75af00>err</span><span style=color:#111>,</span> <span style=color:#75af00>want</span><span style=color:#111>)</span>
	<span style=color:#111>}</span>
<span style=color:#111>}</span>

<span style=color:#75715e>// TestHelloEmpty calls greetings.Hello with an empty string, checking for an
</span><span style=color:#75715e>// error.
</span><span style=color:#75715e></span><span style=color:#00a8c8>func</span> <span style=color:#75af00>TestHelloEmpty</span><span style=color:#111>(</span><span style=color:#75af00>t</span> <span style=color:#f92672>*</span><span style=color:#75af00>testing</span><span style=color:#111>.</span><span style=color:#75af00>T</span><span style=color:#111>)</span> <span style=color:#111>{</span>
	<span style=color:#75af00>msg</span><span style=color:#111>,</span> <span style=color:#75af00>err</span> <span style=color:#f92672>:=</span> <span style=color:#75af00>Hello</span><span style=color:#111>(</span><span style=color:#d88200>&#34;&#34;</span><span style=color:#111>)</span>
	<span style=color:#00a8c8>if</span> <span style=color:#75af00>msg</span> <span style=color:#f92672>!=</span> <span style=color:#d88200>&#34;&#34;</span> <span style=color:#f92672>||</span> <span style=color:#75af00>err</span> <span style=color:#f92672>==</span> <span style=color:#00a8c8>nil</span> <span style=color:#111>{</span>
		<span style=color:#75af00>t</span><span style=color:#111>.</span><span style=color:#75af00>Fatalf</span><span style=color:#111>(</span><span style=color:#d88200>`Hello(&#34;&#34;) = %q, %v, want &#34;&#34;, error`</span><span style=color:#111>,</span> <span style=color:#75af00>msg</span><span style=color:#111>,</span> <span style=color:#75af00>err</span><span style=color:#111>)</span>
	<span style=color:#111>}</span>
<span style=color:#111>}</span>
</code></pre></div><h3 id=编译安装>编译安装</h3>
<p>编译：</p>
<div class=highlight><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>go build

./hello
</code></pre></div><p>安装：</p>
<div class=highlight><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=color:#75715e># 显示安装目录</span>
go list -f <span style=color:#d88200>&#39;{{ .Target }}&#39;</span>

<span style=color:#75715e># 配置环境变量</span>
<span style=color:#111>export</span> <span style=color:#111>PATH</span><span style=color:#f92672>=</span><span style=color:#111>$PATH</span>:/path/to/your/install/directory
<span style=color:#75715e># 安装</span>
go install

<span style=color:#75715e># 运行</span>
hello
</code></pre></div><h2 id=教程访问关系型数据库>教程：访问关系型数据库</h2>
<h3 id=准备>准备</h3>
<p>安装 MySQL：</p>
<div class=highlight><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>docker run -itd --name mysql -e <span style=color:#111>MYSQL_ROOT_PASSWORD</span><span style=color:#f92672>=</span><span style=color:#ae81ff>123456</span> -p 3306:3306 mysql:5.7 --character-set-server<span style=color:#f92672>=</span>utf8mb4 --collation-server<span style=color:#f92672>=</span>utf8mb4_unicode_ci
</code></pre></div><div class=highlight><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>mkdir data-access

<span style=color:#111>cd</span> data-access

go mod init example/data-access
</code></pre></div><h3 id=初始化数据库>初始化数据库</h3>
<div class=highlight><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>docker <span style=color:#111>exec</span> -ti mysql mysql -u root -p123456
</code></pre></div><p>创建数据库：</p>
<div class=highlight><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sql data-lang=sql><span style=color:#00a8c8>create</span> <span style=color:#00a8c8>database</span> <span style=color:#111>recordings</span><span style=color:#111>;</span>
</code></pre></div><p><code>create-tables.sql</code>：</p>
<div class=highlight><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sql data-lang=sql><span style=color:#00a8c8>DROP</span> <span style=color:#00a8c8>TABLE</span> <span style=color:#00a8c8>IF</span> <span style=color:#00a8c8>EXISTS</span> <span style=color:#111>album</span><span style=color:#111>;</span>
<span style=color:#00a8c8>CREATE</span> <span style=color:#00a8c8>TABLE</span> <span style=color:#111>album</span> <span style=color:#111>(</span>
	<span style=color:#111>id</span>			  <span style=color:#111>INT</span> <span style=color:#111>AUTO_INCREMENT</span> <span style=color:#00a8c8>NOT</span> <span style=color:#00a8c8>NULL</span><span style=color:#111>,</span>
	<span style=color:#111>title</span>		  <span style=color:#111>VARCHAR</span><span style=color:#111>(</span><span style=color:#ae81ff>128</span><span style=color:#111>)</span> <span style=color:#00a8c8>NOT</span> <span style=color:#00a8c8>NULL</span><span style=color:#111>,</span>
	<span style=color:#111>artist</span>	  <span style=color:#111>VARCHAR</span><span style=color:#111>(</span><span style=color:#ae81ff>128</span><span style=color:#111>)</span> <span style=color:#00a8c8>NOT</span> <span style=color:#00a8c8>NULL</span><span style=color:#111>,</span>
	<span style=color:#111>price</span>		  <span style=color:#111>DECIMAL</span><span style=color:#111>(</span><span style=color:#ae81ff>5</span><span style=color:#111>,</span><span style=color:#ae81ff>2</span><span style=color:#111>)</span> <span style=color:#00a8c8>NOT</span> <span style=color:#00a8c8>NULL</span><span style=color:#111>,</span>
	<span style=color:#00a8c8>PRIMARY</span> <span style=color:#00a8c8>KEY</span> <span style=color:#111>(</span><span style=color:#f92672>`</span><span style=color:#111>id</span><span style=color:#f92672>`</span><span style=color:#111>)</span>
<span style=color:#111>);</span>

<span style=color:#00a8c8>INSERT</span> <span style=color:#00a8c8>INTO</span> <span style=color:#111>album</span>
  <span style=color:#111>(</span><span style=color:#111>title</span><span style=color:#111>,</span> <span style=color:#111>artist</span><span style=color:#111>,</span> <span style=color:#111>price</span><span style=color:#111>)</span>
<span style=color:#00a8c8>VALUES</span>
  <span style=color:#111>(</span><span style=color:#d88200>&#39;Blue Train&#39;</span><span style=color:#111>,</span> <span style=color:#d88200>&#39;John Coltrane&#39;</span><span style=color:#111>,</span> <span style=color:#ae81ff>56</span><span style=color:#111>.</span><span style=color:#ae81ff>99</span><span style=color:#111>),</span>
  <span style=color:#111>(</span><span style=color:#d88200>&#39;Giant Steps&#39;</span><span style=color:#111>,</span> <span style=color:#d88200>&#39;John Coltrane&#39;</span><span style=color:#111>,</span> <span style=color:#ae81ff>63</span><span style=color:#111>.</span><span style=color:#ae81ff>99</span><span style=color:#111>),</span>
  <span style=color:#111>(</span><span style=color:#d88200>&#39;Jeru&#39;</span><span style=color:#111>,</span> <span style=color:#d88200>&#39;Gerry Mulligan&#39;</span><span style=color:#111>,</span> <span style=color:#ae81ff>17</span><span style=color:#111>.</span><span style=color:#ae81ff>99</span><span style=color:#111>),</span>
  <span style=color:#111>(</span><span style=color:#d88200>&#39;Sarah Vaughan&#39;</span><span style=color:#111>,</span> <span style=color:#d88200>&#39;Sarah Vaughan&#39;</span><span style=color:#111>,</span> <span style=color:#ae81ff>34</span><span style=color:#111>.</span><span style=color:#ae81ff>98</span><span style=color:#111>);</span>
</code></pre></div><p>初始化数据：</p>
<div class=highlight><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>docker <span style=color:#111>exec</span> -ti mysql mysql -uroot -p123456 recordings -e <span style=color:#d88200>&#34;source /tmp/create-tables.sql
</span></code></pre></div><pre tabindex=0><code>mysql&gt; select * from album;
+----+---------------+----------------+-------+
| id | title         | artist         | price |
+----+---------------+----------------+-------+
|  1 | Blue Train    | John Coltrane  | 56.99 |
|  2 | Giant Steps   | John Coltrane  | 63.99 |
|  3 | Jeru          | Gerry Mulligan | 17.99 |
|  4 | Sarah Vaughan | Sarah Vaughan  | 34.98 |
+----+---------------+----------------+-------+
</code></pre><h3 id=获取数据库句柄并链接>获取数据库句柄并链接</h3>
<p><code>main.go</code></p>
<div class=highlight><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=color:#f92672>package</span> <span style=color:#75af00>main</span>

<span style=color:#f92672>import</span> <span style=color:#111>(</span>
	<span style=color:#d88200>&#34;database/sql&#34;</span>
	<span style=color:#d88200>&#34;fmt&#34;</span>
	<span style=color:#d88200>&#34;log&#34;</span>
	<span style=color:#d88200>&#34;os&#34;</span>

	<span style=color:#d88200>&#34;github.com/go-sql-driver/mysql&#34;</span>
<span style=color:#111>)</span>

<span style=color:#00a8c8>var</span> <span style=color:#75af00>db</span> <span style=color:#f92672>*</span><span style=color:#75af00>sql</span><span style=color:#111>.</span><span style=color:#75af00>DB</span>

<span style=color:#00a8c8>func</span> <span style=color:#75af00>main</span><span style=color:#111>()</span> <span style=color:#111>{</span>
	<span style=color:#75715e>// Capture connection properties.
</span><span style=color:#75715e></span>	<span style=color:#75af00>cfg</span> <span style=color:#f92672>:=</span> <span style=color:#75af00>mysql</span><span style=color:#111>.</span><span style=color:#75af00>Config</span><span style=color:#111>{</span>
		<span style=color:#75af00>User</span><span style=color:#111>:</span>                 <span style=color:#75af00>os</span><span style=color:#111>.</span><span style=color:#75af00>Getenv</span><span style=color:#111>(</span><span style=color:#d88200>&#34;DBUSER&#34;</span><span style=color:#111>),</span>
		<span style=color:#75af00>Passwd</span><span style=color:#111>:</span>               <span style=color:#75af00>os</span><span style=color:#111>.</span><span style=color:#75af00>Getenv</span><span style=color:#111>(</span><span style=color:#d88200>&#34;DBPASS&#34;</span><span style=color:#111>),</span>
		<span style=color:#75af00>Net</span><span style=color:#111>:</span>                  <span style=color:#d88200>&#34;tcp&#34;</span><span style=color:#111>,</span>
		<span style=color:#75af00>Addr</span><span style=color:#111>:</span>                 <span style=color:#d88200>&#34;127.0.0.1:3306&#34;</span><span style=color:#111>,</span>
		<span style=color:#75af00>DBName</span><span style=color:#111>:</span>               <span style=color:#d88200>&#34;recordings&#34;</span><span style=color:#111>,</span>
		<span style=color:#75af00>AllowNativePasswords</span><span style=color:#111>:</span> <span style=color:#00a8c8>true</span><span style=color:#111>,</span>
	<span style=color:#111>}</span>
	<span style=color:#75715e>// Get a database handle.
</span><span style=color:#75715e></span>	<span style=color:#00a8c8>var</span> <span style=color:#75af00>err</span> <span style=color:#00a8c8>error</span>
	<span style=color:#75af00>db</span><span style=color:#111>,</span> <span style=color:#75af00>err</span> <span style=color:#111>=</span> <span style=color:#75af00>sql</span><span style=color:#111>.</span><span style=color:#75af00>Open</span><span style=color:#111>(</span><span style=color:#d88200>&#34;mysql&#34;</span><span style=color:#111>,</span> <span style=color:#75af00>cfg</span><span style=color:#111>.</span><span style=color:#75af00>FormatDSN</span><span style=color:#111>())</span>
	<span style=color:#00a8c8>if</span> <span style=color:#75af00>err</span> <span style=color:#f92672>!=</span> <span style=color:#00a8c8>nil</span> <span style=color:#111>{</span>
		<span style=color:#75af00>log</span><span style=color:#111>.</span><span style=color:#75af00>Fatal</span><span style=color:#111>(</span><span style=color:#75af00>err</span><span style=color:#111>)</span>
	<span style=color:#111>}</span>

	<span style=color:#75af00>pingErr</span> <span style=color:#f92672>:=</span> <span style=color:#75af00>db</span><span style=color:#111>.</span><span style=color:#75af00>Ping</span><span style=color:#111>()</span>
	<span style=color:#00a8c8>if</span> <span style=color:#75af00>pingErr</span> <span style=color:#f92672>!=</span> <span style=color:#00a8c8>nil</span> <span style=color:#111>{</span>
		<span style=color:#75af00>log</span><span style=color:#111>.</span><span style=color:#75af00>Fatal</span><span style=color:#111>(</span><span style=color:#75af00>pingErr</span><span style=color:#111>)</span>
	<span style=color:#111>}</span>
	<span style=color:#75af00>fmt</span><span style=color:#111>.</span><span style=color:#75af00>Println</span><span style=color:#111>(</span><span style=color:#d88200>&#34;Connected!&#34;</span><span style=color:#111>)</span>
<span style=color:#111>}</span>
</code></pre></div><ul>
<li><code>sql.DB</code> 表示一个连接池。</li>
<li><code>sql.Open</code> 的第一个参数是驱动名称。</li>
<li><code>cfg.FormatDSN()</code> 将配置转换为 &ldquo;User:Passwd@tcp(127.0.0.1:3306)/recordings&rdquo;。</li>
<li>db.Ping() 检查数据库连通性。</li>
</ul>
<div class=highlight><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>go get .

go run .
</code></pre></div><h3 id=查询多行>查询多行</h3>
<div class=highlight><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=color:#f92672>package</span> <span style=color:#75af00>main</span>

<span style=color:#f92672>import</span> <span style=color:#111>(</span>
	<span style=color:#d88200>&#34;database/sql&#34;</span>
	<span style=color:#d88200>&#34;fmt&#34;</span>
	<span style=color:#d88200>&#34;log&#34;</span>
	<span style=color:#d88200>&#34;os&#34;</span>

	<span style=color:#d88200>&#34;github.com/go-sql-driver/mysql&#34;</span>
<span style=color:#111>)</span>

<span style=color:#00a8c8>var</span> <span style=color:#75af00>db</span> <span style=color:#f92672>*</span><span style=color:#75af00>sql</span><span style=color:#111>.</span><span style=color:#75af00>DB</span>

<span style=color:#00a8c8>type</span> <span style=color:#75af00>Album</span> <span style=color:#00a8c8>struct</span> <span style=color:#111>{</span>
	<span style=color:#75af00>ID</span>     <span style=color:#00a8c8>int64</span>
	<span style=color:#75af00>Title</span>  <span style=color:#00a8c8>string</span>
	<span style=color:#75af00>Artist</span> <span style=color:#00a8c8>string</span>
	<span style=color:#75af00>Price</span>  <span style=color:#00a8c8>float32</span>
<span style=color:#111>}</span>

<span style=color:#00a8c8>func</span> <span style=color:#75af00>main</span><span style=color:#111>()</span> <span style=color:#111>{</span>
	<span style=color:#75715e>// Capture connection properties.
</span><span style=color:#75715e></span>	<span style=color:#75af00>cfg</span> <span style=color:#f92672>:=</span> <span style=color:#75af00>mysql</span><span style=color:#111>.</span><span style=color:#75af00>Config</span><span style=color:#111>{</span>
		<span style=color:#75af00>User</span><span style=color:#111>:</span>                 <span style=color:#75af00>os</span><span style=color:#111>.</span><span style=color:#75af00>Getenv</span><span style=color:#111>(</span><span style=color:#d88200>&#34;DBUSER&#34;</span><span style=color:#111>),</span>
		<span style=color:#75af00>Passwd</span><span style=color:#111>:</span>               <span style=color:#75af00>os</span><span style=color:#111>.</span><span style=color:#75af00>Getenv</span><span style=color:#111>(</span><span style=color:#d88200>&#34;DBPASS&#34;</span><span style=color:#111>),</span>
		<span style=color:#75af00>Net</span><span style=color:#111>:</span>                  <span style=color:#d88200>&#34;tcp&#34;</span><span style=color:#111>,</span>
		<span style=color:#75af00>Addr</span><span style=color:#111>:</span>                 <span style=color:#d88200>&#34;127.0.0.1:3306&#34;</span><span style=color:#111>,</span>
		<span style=color:#75af00>DBName</span><span style=color:#111>:</span>               <span style=color:#d88200>&#34;recordings&#34;</span><span style=color:#111>,</span>
		<span style=color:#75af00>AllowNativePasswords</span><span style=color:#111>:</span> <span style=color:#00a8c8>true</span><span style=color:#111>,</span>
	<span style=color:#111>}</span>
	<span style=color:#75715e>// Get a database handle.
</span><span style=color:#75715e></span>	<span style=color:#00a8c8>var</span> <span style=color:#75af00>err</span> <span style=color:#00a8c8>error</span>
	<span style=color:#75af00>db</span><span style=color:#111>,</span> <span style=color:#75af00>err</span> <span style=color:#111>=</span> <span style=color:#75af00>sql</span><span style=color:#111>.</span><span style=color:#75af00>Open</span><span style=color:#111>(</span><span style=color:#d88200>&#34;mysql&#34;</span><span style=color:#111>,</span> <span style=color:#75af00>cfg</span><span style=color:#111>.</span><span style=color:#75af00>FormatDSN</span><span style=color:#111>())</span>
	<span style=color:#00a8c8>if</span> <span style=color:#75af00>err</span> <span style=color:#f92672>!=</span> <span style=color:#00a8c8>nil</span> <span style=color:#111>{</span>
		<span style=color:#75af00>log</span><span style=color:#111>.</span><span style=color:#75af00>Fatal</span><span style=color:#111>(</span><span style=color:#75af00>err</span><span style=color:#111>)</span>
	<span style=color:#111>}</span>

	<span style=color:#75af00>pingErr</span> <span style=color:#f92672>:=</span> <span style=color:#75af00>db</span><span style=color:#111>.</span><span style=color:#75af00>Ping</span><span style=color:#111>()</span>
	<span style=color:#00a8c8>if</span> <span style=color:#75af00>pingErr</span> <span style=color:#f92672>!=</span> <span style=color:#00a8c8>nil</span> <span style=color:#111>{</span>
		<span style=color:#75af00>log</span><span style=color:#111>.</span><span style=color:#75af00>Fatal</span><span style=color:#111>(</span><span style=color:#75af00>pingErr</span><span style=color:#111>)</span>
	<span style=color:#111>}</span>
	<span style=color:#75af00>fmt</span><span style=color:#111>.</span><span style=color:#75af00>Println</span><span style=color:#111>(</span><span style=color:#d88200>&#34;Connected!&#34;</span><span style=color:#111>)</span>

	<span style=color:#75af00>albums</span><span style=color:#111>,</span> <span style=color:#75af00>err</span> <span style=color:#f92672>:=</span> <span style=color:#75af00>albumByArtist</span><span style=color:#111>(</span><span style=color:#d88200>&#34;John Coltrane&#34;</span><span style=color:#111>)</span>
	<span style=color:#00a8c8>if</span> <span style=color:#75af00>err</span> <span style=color:#f92672>!=</span> <span style=color:#00a8c8>nil</span> <span style=color:#111>{</span>
		<span style=color:#75af00>log</span><span style=color:#111>.</span><span style=color:#75af00>Fatal</span><span style=color:#111>(</span><span style=color:#75af00>err</span><span style=color:#111>)</span>
	<span style=color:#111>}</span>
	<span style=color:#75af00>fmt</span><span style=color:#111>.</span><span style=color:#75af00>Printf</span><span style=color:#111>(</span><span style=color:#d88200>&#34;Albums found: %v\n&#34;</span><span style=color:#111>,</span> <span style=color:#75af00>albums</span><span style=color:#111>)</span>
<span style=color:#111>}</span>

<span style=color:#75715e>// albumByArtist queries for album that have the specified artist name.
</span><span style=color:#75715e></span><span style=color:#00a8c8>func</span> <span style=color:#75af00>albumByArtist</span><span style=color:#111>(</span><span style=color:#75af00>name</span> <span style=color:#00a8c8>string</span><span style=color:#111>)</span> <span style=color:#111>([]</span><span style=color:#75af00>Album</span><span style=color:#111>,</span> <span style=color:#00a8c8>error</span><span style=color:#111>)</span> <span style=color:#111>{</span>
	<span style=color:#75715e>// An album slice to hold data from returned rows.
</span><span style=color:#75715e></span>	<span style=color:#00a8c8>var</span> <span style=color:#75af00>albums</span> <span style=color:#111>[]</span><span style=color:#75af00>Album</span>

	<span style=color:#75af00>rows</span><span style=color:#111>,</span> <span style=color:#75af00>err</span> <span style=color:#f92672>:=</span> <span style=color:#75af00>db</span><span style=color:#111>.</span><span style=color:#75af00>Query</span><span style=color:#111>(</span><span style=color:#d88200>&#34;SELECT * FROM album WHERE artist = ?&#34;</span><span style=color:#111>,</span> <span style=color:#75af00>name</span><span style=color:#111>)</span>
	<span style=color:#00a8c8>if</span> <span style=color:#75af00>err</span> <span style=color:#f92672>!=</span> <span style=color:#00a8c8>nil</span> <span style=color:#111>{</span>
		<span style=color:#00a8c8>return</span> <span style=color:#00a8c8>nil</span><span style=color:#111>,</span> <span style=color:#75af00>fmt</span><span style=color:#111>.</span><span style=color:#75af00>Errorf</span><span style=color:#111>(</span><span style=color:#d88200>&#34;albumByArtist %q: %v&#34;</span><span style=color:#111>,</span> <span style=color:#75af00>name</span><span style=color:#111>,</span> <span style=color:#75af00>err</span><span style=color:#111>)</span>
	<span style=color:#111>}</span>
	<span style=color:#00a8c8>defer</span> <span style=color:#75af00>rows</span><span style=color:#111>.</span><span style=color:#75af00>Close</span><span style=color:#111>()</span>
	<span style=color:#75715e>// Loop through rows, using Scan to assign column data to struct fields.
</span><span style=color:#75715e></span>	<span style=color:#00a8c8>for</span> <span style=color:#75af00>rows</span><span style=color:#111>.</span><span style=color:#75af00>Next</span><span style=color:#111>()</span> <span style=color:#111>{</span>
		<span style=color:#00a8c8>var</span> <span style=color:#75af00>alb</span> <span style=color:#75af00>Album</span>
		<span style=color:#00a8c8>if</span> <span style=color:#75af00>err</span> <span style=color:#f92672>:=</span> <span style=color:#75af00>rows</span><span style=color:#111>.</span><span style=color:#75af00>Scan</span><span style=color:#111>(</span><span style=color:#f92672>&amp;</span><span style=color:#75af00>alb</span><span style=color:#111>.</span><span style=color:#75af00>ID</span><span style=color:#111>,</span> <span style=color:#f92672>&amp;</span><span style=color:#75af00>alb</span><span style=color:#111>.</span><span style=color:#75af00>Title</span><span style=color:#111>,</span> <span style=color:#f92672>&amp;</span><span style=color:#75af00>alb</span><span style=color:#111>.</span><span style=color:#75af00>Artist</span><span style=color:#111>,</span> <span style=color:#f92672>&amp;</span><span style=color:#75af00>alb</span><span style=color:#111>.</span><span style=color:#75af00>Price</span><span style=color:#111>);</span> <span style=color:#75af00>err</span> <span style=color:#f92672>!=</span> <span style=color:#00a8c8>nil</span> <span style=color:#111>{</span>
			<span style=color:#00a8c8>return</span> <span style=color:#00a8c8>nil</span><span style=color:#111>,</span> <span style=color:#75af00>fmt</span><span style=color:#111>.</span><span style=color:#75af00>Errorf</span><span style=color:#111>(</span><span style=color:#d88200>&#34;albumByArtist %q: %v&#34;</span><span style=color:#111>,</span> <span style=color:#75af00>name</span><span style=color:#111>,</span> <span style=color:#75af00>err</span><span style=color:#111>)</span>
		<span style=color:#111>}</span>
		<span style=color:#75af00>albums</span> <span style=color:#111>=</span> <span style=color:#111>append</span><span style=color:#111>(</span><span style=color:#75af00>albums</span><span style=color:#111>,</span> <span style=color:#75af00>alb</span><span style=color:#111>)</span>
	<span style=color:#111>}</span>
	<span style=color:#00a8c8>if</span> <span style=color:#75af00>err</span> <span style=color:#f92672>:=</span> <span style=color:#75af00>rows</span><span style=color:#111>.</span><span style=color:#75af00>Err</span><span style=color:#111>();</span> <span style=color:#75af00>err</span> <span style=color:#f92672>!=</span> <span style=color:#00a8c8>nil</span> <span style=color:#111>{</span>
		<span style=color:#00a8c8>return</span> <span style=color:#00a8c8>nil</span><span style=color:#111>,</span> <span style=color:#75af00>fmt</span><span style=color:#111>.</span><span style=color:#75af00>Errorf</span><span style=color:#111>(</span><span style=color:#d88200>&#34;albumByArtist %q: %v&#34;</span><span style=color:#111>,</span> <span style=color:#75af00>name</span><span style=color:#111>,</span> <span style=color:#75af00>err</span><span style=color:#111>)</span>
	<span style=color:#111>}</span>
	<span style=color:#00a8c8>return</span> <span style=color:#75af00>albums</span><span style=color:#111>,</span> <span style=color:#00a8c8>nil</span>
<span style=color:#111>}</span>
</code></pre></div><ul>
<li><code>Query</code> 方法返回一个 <code>*Rows</code> 的指针，存放结果集。</li>
<li><code>defer rows.Close()</code> 在函数退出阶段调用，防止连接泄漏。</li>
<li><code>rows.Scan</code> 扫描当前行的列值分配给 <code>Album</code> 结构体。</li>
</ul>
<h3 id=查询单行>查询单行</h3>
<p><code>albumByID</code> 函数：</p>
<div class=highlight><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=color:#75715e>// albumByID queries for the album with the specified ID.
</span><span style=color:#75715e></span><span style=color:#00a8c8>func</span> <span style=color:#75af00>albumByID</span><span style=color:#111>(</span><span style=color:#75af00>id</span> <span style=color:#00a8c8>int64</span><span style=color:#111>)</span> <span style=color:#111>(</span><span style=color:#75af00>Album</span><span style=color:#111>,</span> <span style=color:#00a8c8>error</span><span style=color:#111>)</span> <span style=color:#111>{</span>
	<span style=color:#75715e>// An album to hold data from the returned row.
</span><span style=color:#75715e></span>	<span style=color:#00a8c8>var</span> <span style=color:#75af00>alb</span> <span style=color:#75af00>Album</span>

	<span style=color:#75af00>row</span> <span style=color:#f92672>:=</span> <span style=color:#75af00>db</span><span style=color:#111>.</span><span style=color:#75af00>QueryRow</span><span style=color:#111>(</span><span style=color:#d88200>&#34;SELECT * FROM album WHERE id = ?&#34;</span><span style=color:#111>,</span> <span style=color:#75af00>id</span><span style=color:#111>)</span>
	<span style=color:#00a8c8>if</span> <span style=color:#75af00>err</span> <span style=color:#f92672>:=</span> <span style=color:#75af00>row</span><span style=color:#111>.</span><span style=color:#75af00>Scan</span><span style=color:#111>(</span><span style=color:#f92672>&amp;</span><span style=color:#75af00>alb</span><span style=color:#111>.</span><span style=color:#75af00>ID</span><span style=color:#111>,</span> <span style=color:#f92672>&amp;</span><span style=color:#75af00>alb</span><span style=color:#111>.</span><span style=color:#75af00>Title</span><span style=color:#111>,</span> <span style=color:#f92672>&amp;</span><span style=color:#75af00>alb</span><span style=color:#111>.</span><span style=color:#75af00>Artist</span><span style=color:#111>,</span> <span style=color:#f92672>&amp;</span><span style=color:#75af00>alb</span><span style=color:#111>.</span><span style=color:#75af00>Price</span><span style=color:#111>);</span> <span style=color:#75af00>err</span> <span style=color:#f92672>!=</span> <span style=color:#00a8c8>nil</span> <span style=color:#111>{</span>
		<span style=color:#00a8c8>if</span> <span style=color:#75af00>err</span> <span style=color:#f92672>==</span> <span style=color:#75af00>sql</span><span style=color:#111>.</span><span style=color:#75af00>ErrNoRows</span> <span style=color:#111>{</span>
			<span style=color:#00a8c8>return</span> <span style=color:#75af00>alb</span><span style=color:#111>,</span> <span style=color:#75af00>fmt</span><span style=color:#111>.</span><span style=color:#75af00>Errorf</span><span style=color:#111>(</span><span style=color:#d88200>&#34;albumByID %d: no such album&#34;</span><span style=color:#111>,</span> <span style=color:#75af00>id</span><span style=color:#111>)</span>
		<span style=color:#111>}</span>
		<span style=color:#00a8c8>return</span> <span style=color:#75af00>alb</span><span style=color:#111>,</span> <span style=color:#75af00>fmt</span><span style=color:#111>.</span><span style=color:#75af00>Errorf</span><span style=color:#111>(</span><span style=color:#d88200>&#34;albumByID %d: %v&#34;</span><span style=color:#111>,</span> <span style=color:#75af00>id</span><span style=color:#111>,</span> <span style=color:#75af00>err</span><span style=color:#111>)</span>
	<span style=color:#111>}</span>
	<span style=color:#00a8c8>return</span> <span style=color:#75af00>alb</span><span style=color:#111>,</span> <span style=color:#00a8c8>nil</span>
<span style=color:#111>}</span>
</code></pre></div><p><code>main</code> 函数添加：</p>
<div class=highlight><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go>	<span style=color:#75715e>// Hard-code ID 2 here to test the query.
</span><span style=color:#75715e></span>	<span style=color:#75af00>alb</span><span style=color:#111>,</span> <span style=color:#75af00>err</span> <span style=color:#f92672>:=</span> <span style=color:#75af00>albumByID</span><span style=color:#111>(</span><span style=color:#ae81ff>2</span><span style=color:#111>)</span>
	<span style=color:#00a8c8>if</span> <span style=color:#75af00>err</span> <span style=color:#f92672>!=</span> <span style=color:#00a8c8>nil</span> <span style=color:#111>{</span>
		<span style=color:#75af00>log</span><span style=color:#111>.</span><span style=color:#75af00>Fatal</span><span style=color:#111>(</span><span style=color:#75af00>err</span><span style=color:#111>)</span>
	<span style=color:#111>}</span>
	<span style=color:#75af00>fmt</span><span style=color:#111>.</span><span style=color:#75af00>Printf</span><span style=color:#111>(</span><span style=color:#d88200>&#34;Album found: %v\n&#34;</span><span style=color:#111>,</span> <span style=color:#75af00>alb</span><span style=color:#111>)</span>
</code></pre></div><h2 id=添加数据>添加数据</h2>
<p><code>addAlbum</code> 函数：</p>
<div class=highlight><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=color:#75715e>// addAlbum adds the specified album to the database, returning the album ID of
</span><span style=color:#75715e>// the nuw entry
</span><span style=color:#75715e></span><span style=color:#00a8c8>func</span> <span style=color:#75af00>addAlbum</span><span style=color:#111>(</span><span style=color:#75af00>alb</span> <span style=color:#75af00>Album</span><span style=color:#111>)</span> <span style=color:#111>(</span><span style=color:#00a8c8>int64</span><span style=color:#111>,</span> <span style=color:#00a8c8>error</span><span style=color:#111>)</span> <span style=color:#111>{</span>
	<span style=color:#75af00>result</span><span style=color:#111>,</span> <span style=color:#75af00>err</span> <span style=color:#f92672>:=</span> <span style=color:#75af00>db</span><span style=color:#111>.</span><span style=color:#75af00>Exec</span><span style=color:#111>(</span><span style=color:#d88200>&#34;INSERT INTO album (title, artist, price) VALUES (?, ?, ?)&#34;</span><span style=color:#111>,</span> <span style=color:#75af00>alb</span><span style=color:#111>.</span><span style=color:#75af00>Title</span><span style=color:#111>,</span> <span style=color:#75af00>alb</span><span style=color:#111>.</span><span style=color:#75af00>Artist</span><span style=color:#111>,</span> <span style=color:#75af00>alb</span><span style=color:#111>.</span><span style=color:#75af00>Price</span><span style=color:#111>)</span>
	<span style=color:#00a8c8>if</span> <span style=color:#75af00>err</span> <span style=color:#f92672>!=</span> <span style=color:#00a8c8>nil</span> <span style=color:#111>{</span>
		<span style=color:#00a8c8>return</span> <span style=color:#ae81ff>0</span><span style=color:#111>,</span> <span style=color:#75af00>fmt</span><span style=color:#111>.</span><span style=color:#75af00>Errorf</span><span style=color:#111>(</span><span style=color:#d88200>&#34;addAlbum: %v&#34;</span><span style=color:#111>,</span> <span style=color:#75af00>err</span><span style=color:#111>)</span>
	<span style=color:#111>}</span>
	<span style=color:#75af00>id</span><span style=color:#111>,</span> <span style=color:#75af00>err</span> <span style=color:#f92672>:=</span> <span style=color:#75af00>result</span><span style=color:#111>.</span><span style=color:#75af00>LastInsertId</span><span style=color:#111>()</span>
	<span style=color:#00a8c8>if</span> <span style=color:#75af00>err</span> <span style=color:#f92672>!=</span> <span style=color:#00a8c8>nil</span> <span style=color:#111>{</span>
		<span style=color:#00a8c8>return</span> <span style=color:#ae81ff>0</span><span style=color:#111>,</span> <span style=color:#75af00>fmt</span><span style=color:#111>.</span><span style=color:#75af00>Errorf</span><span style=color:#111>(</span><span style=color:#d88200>&#34;addAlbum: %v&#34;</span><span style=color:#111>,</span> <span style=color:#75af00>err</span><span style=color:#111>)</span>
	<span style=color:#111>}</span>
	<span style=color:#00a8c8>return</span> <span style=color:#75af00>id</span><span style=color:#111>,</span> <span style=color:#00a8c8>nil</span>
<span style=color:#111>}</span>
</code></pre></div><ul>
<li><code>db.Exec</code> 方法执行不返回数据的 SQL 语句。</li>
<li><code>Result.LastInsertId</code> 方法返回插入数据库行的 ID。</li>
</ul>
<p><code>main</code> 函数添加：</p>
<div class=highlight><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go>	<span style=color:#75af00>albID</span><span style=color:#111>,</span> <span style=color:#75af00>err</span> <span style=color:#f92672>:=</span> <span style=color:#75af00>addAlbum</span><span style=color:#111>(</span><span style=color:#75af00>Album</span><span style=color:#111>{</span>
		<span style=color:#75af00>Title</span><span style=color:#111>:</span>  <span style=color:#d88200>&#34;The Modern Sound of Betty Carter&#34;</span><span style=color:#111>,</span>
		<span style=color:#75af00>Artist</span><span style=color:#111>:</span> <span style=color:#d88200>&#34;Betty Carter&#34;</span><span style=color:#111>,</span>
		<span style=color:#75af00>Price</span><span style=color:#111>:</span>  <span style=color:#ae81ff>49.99</span><span style=color:#111>,</span>
	<span style=color:#111>})</span>
	<span style=color:#00a8c8>if</span> <span style=color:#75af00>err</span> <span style=color:#f92672>!=</span> <span style=color:#00a8c8>nil</span> <span style=color:#111>{</span>
		<span style=color:#75af00>log</span><span style=color:#111>.</span><span style=color:#75af00>Fatal</span><span style=color:#111>(</span><span style=color:#75af00>err</span><span style=color:#111>)</span>
	<span style=color:#111>}</span>
	<span style=color:#75af00>fmt</span><span style=color:#111>.</span><span style=color:#75af00>Printf</span><span style=color:#111>(</span><span style=color:#d88200>&#34;ID of added album: %v\n&#34;</span><span style=color:#111>,</span> <span style=color:#75af00>albID</span><span style=color:#111>)</span>
</code></pre></div><h2 id=教程使用-gin-开发-restful-api>教程：使用 Gin 开发 RESTful API</h2>
<h3 id=创建数据>创建数据</h3>
<div class=highlight><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=color:#f92672>package</span> <span style=color:#75af00>main</span>

<span style=color:#75715e>// album represents data about a record album.
</span><span style=color:#75715e></span><span style=color:#00a8c8>type</span> <span style=color:#75af00>album</span> <span style=color:#00a8c8>struct</span> <span style=color:#111>{</span>
	<span style=color:#75af00>ID</span>     <span style=color:#00a8c8>string</span>  <span style=color:#d88200>`json:&#34;id&#34;`</span>
	<span style=color:#75af00>Title</span>  <span style=color:#00a8c8>string</span>  <span style=color:#d88200>`json:&#34;title&#34;`</span>
	<span style=color:#75af00>Artist</span> <span style=color:#00a8c8>string</span>  <span style=color:#d88200>`json:&#34;artist&#34;`</span>
	<span style=color:#75af00>Price</span>  <span style=color:#00a8c8>float64</span> <span style=color:#d88200>`json:&#34;price&#34;`</span>
<span style=color:#111>}</span>

<span style=color:#75715e>// albums slice to seed record album data.
</span><span style=color:#75715e></span><span style=color:#00a8c8>var</span> <span style=color:#75af00>albums</span> <span style=color:#111>=</span> <span style=color:#111>[]</span><span style=color:#75af00>album</span><span style=color:#111>{</span>
	<span style=color:#111>{</span><span style=color:#75af00>ID</span><span style=color:#111>:</span> <span style=color:#d88200>&#34;1&#34;</span><span style=color:#111>,</span> <span style=color:#75af00>Title</span><span style=color:#111>:</span> <span style=color:#d88200>&#34;Blue Train&#34;</span><span style=color:#111>,</span> <span style=color:#75af00>Artist</span><span style=color:#111>:</span> <span style=color:#d88200>&#34;John Coltrane&#34;</span><span style=color:#111>,</span> <span style=color:#75af00>Price</span><span style=color:#111>:</span> <span style=color:#ae81ff>56.99</span><span style=color:#111>},</span>
	<span style=color:#111>{</span><span style=color:#75af00>ID</span><span style=color:#111>:</span> <span style=color:#d88200>&#34;2&#34;</span><span style=color:#111>,</span> <span style=color:#75af00>Title</span><span style=color:#111>:</span> <span style=color:#d88200>&#34;Jeru&#34;</span><span style=color:#111>,</span> <span style=color:#75af00>Artist</span><span style=color:#111>:</span> <span style=color:#d88200>&#34;Gerry Mulligan&#34;</span><span style=color:#111>,</span> <span style=color:#75af00>Price</span><span style=color:#111>:</span> <span style=color:#ae81ff>17.99</span><span style=color:#111>},</span>
	<span style=color:#111>{</span><span style=color:#75af00>ID</span><span style=color:#111>:</span> <span style=color:#d88200>&#34;3&#34;</span><span style=color:#111>,</span> <span style=color:#75af00>Title</span><span style=color:#111>:</span> <span style=color:#d88200>&#34;Sarah Vaughan and Clifford Brown&#34;</span><span style=color:#111>,</span> <span style=color:#75af00>Artist</span><span style=color:#111>:</span> <span style=color:#d88200>&#34;Sarah Vaughan&#34;</span><span style=color:#111>,</span> <span style=color:#75af00>Price</span><span style=color:#111>:</span> <span style=color:#ae81ff>39.99</span><span style=color:#111>},</span>
<span style=color:#111>}</span>
</code></pre></div><h3 id=返回所有数据>返回所有数据</h3>
<div class=highlight><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=color:#f92672>import</span> <span style=color:#111>(</span>
	<span style=color:#d88200>&#34;net/http&#34;</span>

	<span style=color:#d88200>&#34;github.com/gin-gonic/gin&#34;</span>
<span style=color:#111>)</span>

<span style=color:#75715e>// ...
</span><span style=color:#75715e></span>
<span style=color:#00a8c8>func</span> <span style=color:#75af00>main</span><span style=color:#111>()</span> <span style=color:#111>{</span>

	<span style=color:#75af00>router</span> <span style=color:#f92672>:=</span> <span style=color:#75af00>gin</span><span style=color:#111>.</span><span style=color:#75af00>Default</span><span style=color:#111>()</span>
	<span style=color:#75af00>router</span><span style=color:#111>.</span><span style=color:#75af00>GET</span><span style=color:#111>(</span><span style=color:#d88200>&#34;/albums&#34;</span><span style=color:#111>,</span> <span style=color:#75af00>getAlbums</span><span style=color:#111>)</span>

	<span style=color:#75af00>router</span><span style=color:#111>.</span><span style=color:#75af00>Run</span><span style=color:#111>(</span><span style=color:#d88200>&#34;localhost:8080&#34;</span><span style=color:#111>)</span>
<span style=color:#111>}</span>

<span style=color:#75715e>// getAlbums responds with the list of all albums as JSON.
</span><span style=color:#75715e></span><span style=color:#00a8c8>func</span> <span style=color:#75af00>getAlbums</span><span style=color:#111>(</span><span style=color:#75af00>c</span> <span style=color:#f92672>*</span><span style=color:#75af00>gin</span><span style=color:#111>.</span><span style=color:#75af00>Context</span><span style=color:#111>)</span> <span style=color:#111>{</span>
	<span style=color:#75af00>c</span><span style=color:#111>.</span><span style=color:#75af00>IndentedJSON</span><span style=color:#111>(</span><span style=color:#75af00>http</span><span style=color:#111>.</span><span style=color:#75af00>StatusOK</span><span style=color:#111>,</span> <span style=color:#75af00>albums</span><span style=color:#111>)</span>
<span style=color:#111>}</span>
</code></pre></div><div class=highlight><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>go get .

go run .

curl http://localhost:8080/albums
</code></pre></div><h3 id=添加新项>添加新项</h3>
<p>添加 <code>postAlbums</code> 函数：</p>
<div class=highlight><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=color:#75715e>// postAlbums adds an album from JSON received in the request body.
</span><span style=color:#75715e></span><span style=color:#00a8c8>func</span> <span style=color:#75af00>postAlbums</span><span style=color:#111>(</span><span style=color:#75af00>c</span> <span style=color:#f92672>*</span><span style=color:#75af00>gin</span><span style=color:#111>.</span><span style=color:#75af00>Context</span><span style=color:#111>)</span> <span style=color:#111>{</span>
	<span style=color:#00a8c8>var</span> <span style=color:#75af00>newAlbum</span> <span style=color:#75af00>album</span>

	<span style=color:#75715e>// Call BindJSON to bind the received JSON to new Album.
</span><span style=color:#75715e></span>	<span style=color:#00a8c8>if</span> <span style=color:#75af00>err</span> <span style=color:#f92672>:=</span> <span style=color:#75af00>c</span><span style=color:#111>.</span><span style=color:#75af00>BindJSON</span><span style=color:#111>(</span><span style=color:#f92672>&amp;</span><span style=color:#75af00>newAlbum</span><span style=color:#111>);</span> <span style=color:#75af00>err</span> <span style=color:#f92672>!=</span> <span style=color:#00a8c8>nil</span> <span style=color:#111>{</span>
		<span style=color:#00a8c8>return</span>
	<span style=color:#111>}</span>

	<span style=color:#75715e>// Add the new album to the slice.
</span><span style=color:#75715e></span>	<span style=color:#75af00>albums</span> <span style=color:#111>=</span> <span style=color:#111>append</span><span style=color:#111>(</span><span style=color:#75af00>albums</span><span style=color:#111>,</span> <span style=color:#75af00>newAlbum</span><span style=color:#111>)</span>
	<span style=color:#75af00>c</span><span style=color:#111>.</span><span style=color:#75af00>IndentedJSON</span><span style=color:#111>(</span><span style=color:#75af00>http</span><span style=color:#111>.</span><span style=color:#75af00>StatusCreated</span><span style=color:#111>,</span> <span style=color:#75af00>newAlbum</span><span style=color:#111>)</span>
<span style=color:#111>}</span>
</code></pre></div><p><code>main</code> 函数添加：</p>
<div class=highlight><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=color:#75af00>router</span><span style=color:#111>.</span><span style=color:#75af00>POST</span><span style=color:#111>(</span><span style=color:#d88200>&#34;/albums&#34;</span><span style=color:#111>,</span> <span style=color:#75af00>postAlbums</span><span style=color:#111>)</span>
</code></pre></div><div class=highlight><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>curl http://localhost:8080/albums <span style=color:#8045ff>\
</span><span style=color:#8045ff></span>	--include <span style=color:#8045ff>\
</span><span style=color:#8045ff></span>	--header <span style=color:#d88200>&#34;Content-Type: application/json&#34;</span> <span style=color:#8045ff>\
</span><span style=color:#8045ff></span>	--request <span style=color:#d88200>&#34;POST&#34;</span> <span style=color:#8045ff>\
</span><span style=color:#8045ff></span>	--data <span style=color:#d88200>&#39;{&#34;id&#34;: &#34;4&#34;,&#34;title&#34;: &#34;The Modern Sound of Betty Carter&#34;,&#34;artist&#34;: &#34;Betty Carter&#34;,&#34;price&#34;: 49.99}&#39;</span>

curl http://localhost:8080/albums <span style=color:#8045ff>\
</span><span style=color:#8045ff></span>	--header <span style=color:#d88200>&#34;Content-Type: application/json&#34;</span> <span style=color:#8045ff>\
</span><span style=color:#8045ff></span>	--request <span style=color:#d88200>&#34;GET&#34;</span>
</code></pre></div><h3 id=返回特定项>返回特定项</h3>
<p><code>getAlbumByID</code> 函数：</p>
<div class=highlight><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=color:#75715e>// getAlbumByID locates the album whose ID value matches the id parameter sent
</span><span style=color:#75715e>// by the client, then returns that album as a response.
</span><span style=color:#75715e></span><span style=color:#00a8c8>func</span> <span style=color:#75af00>getAlbumByID</span><span style=color:#111>(</span><span style=color:#75af00>c</span> <span style=color:#f92672>*</span><span style=color:#75af00>gin</span><span style=color:#111>.</span><span style=color:#75af00>Context</span><span style=color:#111>)</span> <span style=color:#111>{</span>
	<span style=color:#75af00>id</span> <span style=color:#f92672>:=</span> <span style=color:#75af00>c</span><span style=color:#111>.</span><span style=color:#75af00>Param</span><span style=color:#111>(</span><span style=color:#d88200>&#34;id&#34;</span><span style=color:#111>)</span>

	<span style=color:#75715e>// Loop over the list of albums, looking for an album whose ID value matches
</span><span style=color:#75715e></span>	<span style=color:#75715e>// the parameter.
</span><span style=color:#75715e></span>	<span style=color:#00a8c8>for</span> <span style=color:#75af00>_</span><span style=color:#111>,</span> <span style=color:#75af00>a</span> <span style=color:#f92672>:=</span> <span style=color:#00a8c8>range</span> <span style=color:#75af00>albums</span> <span style=color:#111>{</span>
		<span style=color:#00a8c8>if</span> <span style=color:#75af00>a</span><span style=color:#111>.</span><span style=color:#75af00>ID</span> <span style=color:#f92672>==</span> <span style=color:#75af00>id</span> <span style=color:#111>{</span>
			<span style=color:#75af00>c</span><span style=color:#111>.</span><span style=color:#75af00>IndentedJSON</span><span style=color:#111>(</span><span style=color:#75af00>http</span><span style=color:#111>.</span><span style=color:#75af00>StatusOK</span><span style=color:#111>,</span> <span style=color:#75af00>a</span><span style=color:#111>)</span>
			<span style=color:#00a8c8>return</span>
		<span style=color:#111>}</span>
	<span style=color:#111>}</span>
	<span style=color:#75af00>c</span><span style=color:#111>.</span><span style=color:#75af00>IndentedJSON</span><span style=color:#111>(</span><span style=color:#75af00>http</span><span style=color:#111>.</span><span style=color:#75af00>StatusNotFound</span><span style=color:#111>,</span> <span style=color:#75af00>gin</span><span style=color:#111>.</span><span style=color:#75af00>H</span><span style=color:#111>{</span><span style=color:#d88200>&#34;message&#34;</span><span style=color:#111>:</span> <span style=color:#d88200>&#34;album not found&#34;</span><span style=color:#111>})</span>
<span style=color:#111>}</span>
</code></pre></div><p><code>main</code> 添加：</p>
<div class=highlight><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go>	<span style=color:#75af00>router</span><span style=color:#111>.</span><span style=color:#75af00>GET</span><span style=color:#111>(</span><span style=color:#d88200>&#34;/albums/:id&#34;</span><span style=color:#111>,</span> <span style=color:#75af00>getAlbumByID</span><span style=color:#111>)</span>
</code></pre></div><ul>
<li><code>:id</code> Gin 中路径前面有冒号表示该项是路径参数。</li>
</ul>
<div class=highlight><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>curl http://localhost:8080/albums/2

curl http://localhost:8080/albums/5
</code></pre></div><h3 id=完整代码>完整代码</h3>
<div class=highlight><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=color:#f92672>package</span> <span style=color:#75af00>main</span>

<span style=color:#f92672>import</span> <span style=color:#111>(</span>
	<span style=color:#d88200>&#34;net/http&#34;</span>

	<span style=color:#d88200>&#34;github.com/gin-gonic/gin&#34;</span>
<span style=color:#111>)</span>

<span style=color:#75715e>// album represents data about a record album.
</span><span style=color:#75715e></span><span style=color:#00a8c8>type</span> <span style=color:#75af00>album</span> <span style=color:#00a8c8>struct</span> <span style=color:#111>{</span>
	<span style=color:#75af00>ID</span>     <span style=color:#00a8c8>string</span>  <span style=color:#d88200>`json:&#34;id&#34;`</span>
	<span style=color:#75af00>Title</span>  <span style=color:#00a8c8>string</span>  <span style=color:#d88200>`json:&#34;title&#34;`</span>
	<span style=color:#75af00>Artist</span> <span style=color:#00a8c8>string</span>  <span style=color:#d88200>`json:&#34;artist&#34;`</span>
	<span style=color:#75af00>Price</span>  <span style=color:#00a8c8>float64</span> <span style=color:#d88200>`json:&#34;price&#34;`</span>
<span style=color:#111>}</span>

<span style=color:#75715e>// albums slice to seed record album data.
</span><span style=color:#75715e></span><span style=color:#00a8c8>var</span> <span style=color:#75af00>albums</span> <span style=color:#111>=</span> <span style=color:#111>[]</span><span style=color:#75af00>album</span><span style=color:#111>{</span>
	<span style=color:#111>{</span><span style=color:#75af00>ID</span><span style=color:#111>:</span> <span style=color:#d88200>&#34;1&#34;</span><span style=color:#111>,</span> <span style=color:#75af00>Title</span><span style=color:#111>:</span> <span style=color:#d88200>&#34;Blue Train&#34;</span><span style=color:#111>,</span> <span style=color:#75af00>Artist</span><span style=color:#111>:</span> <span style=color:#d88200>&#34;John Coltrane&#34;</span><span style=color:#111>,</span> <span style=color:#75af00>Price</span><span style=color:#111>:</span> <span style=color:#ae81ff>56.99</span><span style=color:#111>},</span>
	<span style=color:#111>{</span><span style=color:#75af00>ID</span><span style=color:#111>:</span> <span style=color:#d88200>&#34;2&#34;</span><span style=color:#111>,</span> <span style=color:#75af00>Title</span><span style=color:#111>:</span> <span style=color:#d88200>&#34;Jeru&#34;</span><span style=color:#111>,</span> <span style=color:#75af00>Artist</span><span style=color:#111>:</span> <span style=color:#d88200>&#34;Gerry Mulligan&#34;</span><span style=color:#111>,</span> <span style=color:#75af00>Price</span><span style=color:#111>:</span> <span style=color:#ae81ff>17.99</span><span style=color:#111>},</span>
	<span style=color:#111>{</span><span style=color:#75af00>ID</span><span style=color:#111>:</span> <span style=color:#d88200>&#34;3&#34;</span><span style=color:#111>,</span> <span style=color:#75af00>Title</span><span style=color:#111>:</span> <span style=color:#d88200>&#34;Sarah Vaughan and Clifford Brown&#34;</span><span style=color:#111>,</span> <span style=color:#75af00>Artist</span><span style=color:#111>:</span> <span style=color:#d88200>&#34;Sarah Vaughan&#34;</span><span style=color:#111>,</span> <span style=color:#75af00>Price</span><span style=color:#111>:</span> <span style=color:#ae81ff>39.99</span><span style=color:#111>},</span>
<span style=color:#111>}</span>

<span style=color:#00a8c8>func</span> <span style=color:#75af00>main</span><span style=color:#111>()</span> <span style=color:#111>{</span>

	<span style=color:#75af00>router</span> <span style=color:#f92672>:=</span> <span style=color:#75af00>gin</span><span style=color:#111>.</span><span style=color:#75af00>Default</span><span style=color:#111>()</span>
	<span style=color:#75af00>router</span><span style=color:#111>.</span><span style=color:#75af00>GET</span><span style=color:#111>(</span><span style=color:#d88200>&#34;/albums&#34;</span><span style=color:#111>,</span> <span style=color:#75af00>getAlbums</span><span style=color:#111>)</span>
	<span style=color:#75af00>router</span><span style=color:#111>.</span><span style=color:#75af00>GET</span><span style=color:#111>(</span><span style=color:#d88200>&#34;/albums/:id&#34;</span><span style=color:#111>,</span> <span style=color:#75af00>getAlbumByID</span><span style=color:#111>)</span>
	<span style=color:#75af00>router</span><span style=color:#111>.</span><span style=color:#75af00>POST</span><span style=color:#111>(</span><span style=color:#d88200>&#34;/albums&#34;</span><span style=color:#111>,</span> <span style=color:#75af00>postAlbums</span><span style=color:#111>)</span>

	<span style=color:#75af00>router</span><span style=color:#111>.</span><span style=color:#75af00>Run</span><span style=color:#111>(</span><span style=color:#d88200>&#34;localhost:8080&#34;</span><span style=color:#111>)</span>
<span style=color:#111>}</span>

<span style=color:#75715e>// getAlbums responds with the list of all albums as JSON.
</span><span style=color:#75715e></span><span style=color:#00a8c8>func</span> <span style=color:#75af00>getAlbums</span><span style=color:#111>(</span><span style=color:#75af00>c</span> <span style=color:#f92672>*</span><span style=color:#75af00>gin</span><span style=color:#111>.</span><span style=color:#75af00>Context</span><span style=color:#111>)</span> <span style=color:#111>{</span>
	<span style=color:#75af00>c</span><span style=color:#111>.</span><span style=color:#75af00>IndentedJSON</span><span style=color:#111>(</span><span style=color:#75af00>http</span><span style=color:#111>.</span><span style=color:#75af00>StatusOK</span><span style=color:#111>,</span> <span style=color:#75af00>albums</span><span style=color:#111>)</span>
<span style=color:#111>}</span>

<span style=color:#75715e>// postAlbums adds an album from JSON received in the request body.
</span><span style=color:#75715e></span><span style=color:#00a8c8>func</span> <span style=color:#75af00>postAlbums</span><span style=color:#111>(</span><span style=color:#75af00>c</span> <span style=color:#f92672>*</span><span style=color:#75af00>gin</span><span style=color:#111>.</span><span style=color:#75af00>Context</span><span style=color:#111>)</span> <span style=color:#111>{</span>
	<span style=color:#00a8c8>var</span> <span style=color:#75af00>newAlbum</span> <span style=color:#75af00>album</span>

	<span style=color:#75715e>// Call BindJSON to bind the received JSON to new Album.
</span><span style=color:#75715e></span>	<span style=color:#00a8c8>if</span> <span style=color:#75af00>err</span> <span style=color:#f92672>:=</span> <span style=color:#75af00>c</span><span style=color:#111>.</span><span style=color:#75af00>BindJSON</span><span style=color:#111>(</span><span style=color:#f92672>&amp;</span><span style=color:#75af00>newAlbum</span><span style=color:#111>);</span> <span style=color:#75af00>err</span> <span style=color:#f92672>!=</span> <span style=color:#00a8c8>nil</span> <span style=color:#111>{</span>
		<span style=color:#00a8c8>return</span>
	<span style=color:#111>}</span>

	<span style=color:#75715e>// Add the new album to the slice.
</span><span style=color:#75715e></span>	<span style=color:#75af00>albums</span> <span style=color:#111>=</span> <span style=color:#111>append</span><span style=color:#111>(</span><span style=color:#75af00>albums</span><span style=color:#111>,</span> <span style=color:#75af00>newAlbum</span><span style=color:#111>)</span>
	<span style=color:#75af00>c</span><span style=color:#111>.</span><span style=color:#75af00>IndentedJSON</span><span style=color:#111>(</span><span style=color:#75af00>http</span><span style=color:#111>.</span><span style=color:#75af00>StatusCreated</span><span style=color:#111>,</span> <span style=color:#75af00>newAlbum</span><span style=color:#111>)</span>
<span style=color:#111>}</span>

<span style=color:#75715e>// getAlbumByID locates the album whose ID value matches the id parameter sent
</span><span style=color:#75715e>// by the client, then returns that album as a response.
</span><span style=color:#75715e></span><span style=color:#00a8c8>func</span> <span style=color:#75af00>getAlbumByID</span><span style=color:#111>(</span><span style=color:#75af00>c</span> <span style=color:#f92672>*</span><span style=color:#75af00>gin</span><span style=color:#111>.</span><span style=color:#75af00>Context</span><span style=color:#111>)</span> <span style=color:#111>{</span>
	<span style=color:#75af00>id</span> <span style=color:#f92672>:=</span> <span style=color:#75af00>c</span><span style=color:#111>.</span><span style=color:#75af00>Param</span><span style=color:#111>(</span><span style=color:#d88200>&#34;id&#34;</span><span style=color:#111>)</span>

	<span style=color:#75715e>// Loop over the list of albums, looking for an album whose ID value matches
</span><span style=color:#75715e></span>	<span style=color:#75715e>// the parameter.
</span><span style=color:#75715e></span>	<span style=color:#00a8c8>for</span> <span style=color:#75af00>_</span><span style=color:#111>,</span> <span style=color:#75af00>a</span> <span style=color:#f92672>:=</span> <span style=color:#00a8c8>range</span> <span style=color:#75af00>albums</span> <span style=color:#111>{</span>
		<span style=color:#00a8c8>if</span> <span style=color:#75af00>a</span><span style=color:#111>.</span><span style=color:#75af00>ID</span> <span style=color:#f92672>==</span> <span style=color:#75af00>id</span> <span style=color:#111>{</span>
			<span style=color:#75af00>c</span><span style=color:#111>.</span><span style=color:#75af00>IndentedJSON</span><span style=color:#111>(</span><span style=color:#75af00>http</span><span style=color:#111>.</span><span style=color:#75af00>StatusOK</span><span style=color:#111>,</span> <span style=color:#75af00>a</span><span style=color:#111>)</span>
			<span style=color:#00a8c8>return</span>
		<span style=color:#111>}</span>
	<span style=color:#111>}</span>
	<span style=color:#75af00>c</span><span style=color:#111>.</span><span style=color:#75af00>IndentedJSON</span><span style=color:#111>(</span><span style=color:#75af00>http</span><span style=color:#111>.</span><span style=color:#75af00>StatusNotFound</span><span style=color:#111>,</span> <span style=color:#75af00>gin</span><span style=color:#111>.</span><span style=color:#75af00>H</span><span style=color:#111>{</span><span style=color:#d88200>&#34;message&#34;</span><span style=color:#111>:</span> <span style=color:#d88200>&#34;album not found&#34;</span><span style=color:#111>})</span>
<span style=color:#111>}</span>
</code></pre></div>
<div class=row><div class="position-relative mx-auto col-lg-9">
<div class="bg-primary overflow-hidden p-3 mt-5 shadow">
<h4 class="text-white text-center">阅读更多</h4>
<div class="d-flex justify-content-center"><a class="p-1 mr-3 d-inline-block text-white" href=/learning-notes/golang/go-install/ title="Go 安装"><i class="fas fa-chevron-left p-1"></i>Go 安装</a>
<a class="p-1 ml-3 d-inline-block text-white text-right" href=/operation-guide/ title=操作指南>操作指南<i class="fas fa-chevron-right p-1"></i></a>
</div>
</div>
</div></div>
</div>
</div>
</div>
<script src=https://www.shisanshiji.com/lib/jquery.min.js></script>
<script src=https://www.shisanshiji.com/lib/popper.min.js></script>
<script src=https://www.shisanshiji.com/js/bootstrap.min.js></script>
<script type=text/javascript src=/plugins/lunr.min.js></script>
<script type=text/javascript src=/plugins/auto-complete.js></script>
<link href=/plugins/auto-complete.css rel=stylesheet>
<script type=text/javascript>var baseurl="https://www.shisanshiji.com/"</script>
<script type=text/javascript src=/plugins/search.js></script>
<script type=text/javascript src=/plugins/clipboard.js></script>
<script>new ClipboardJS('.btn')</script>
</body>
</html>