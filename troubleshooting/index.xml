<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>问题排查 on 十三时记</title><link>https://www.shisanshiji.com/troubleshooting/</link><description>Recent content in 问题排查 on 十三时记</description><generator>Hugo -- gohugo.io</generator><language>en-us</language><atom:link href="https://www.shisanshiji.com/troubleshooting/index.xml" rel="self" type="application/rss+xml"/><item><title>Elasticsearch 问题排查</title><link>https://www.shisanshiji.com/troubleshooting/elasticsearch-troubleshooting/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://www.shisanshiji.com/troubleshooting/elasticsearch-troubleshooting/</guid><description>问题列表如下：
集群中包含未分配的副本导致集群变为 Red 状态 集群中包含未分配的副本导致集群变为 Red 状态 查看集群状态信息 首先确定原因。
查看整体健康信息 $ curl -u &amp;#39;elastic:password&amp;#39; &amp;#39;http://127.0.0.1:9200/_cluster/health?pretty&amp;#39; { &amp;#34;cluster_name&amp;#34; : &amp;#34;elasticsearch&amp;#34;, &amp;#34;status&amp;#34; : &amp;#34;red&amp;#34;, &amp;#34;timed_out&amp;#34; : false, &amp;#34;number_of_nodes&amp;#34; : 1, &amp;#34;number_of_data_nodes&amp;#34; : 1, &amp;#34;active_primary_shards&amp;#34; : 69, &amp;#34;active_shards&amp;#34; : 69, &amp;#34;relocating_shards&amp;#34; : 0, &amp;#34;initializing_shards&amp;#34; : 0, &amp;#34;unassigned_shards&amp;#34; : 1, &amp;#34;delayed_unassigned_shards&amp;#34; : 0, &amp;#34;number_of_pending_tasks&amp;#34; : 0, &amp;#34;number_of_in_flight_fetch&amp;#34; : 0, &amp;#34;task_max_waiting_in_queue_millis&amp;#34; : 0, &amp;#34;active_shards_percent_as_number&amp;#34; : 98.57142857142858 } 主要关注其中的 unassigned_shards 指标，其代表已经在集群状态中存在的分片，但是实际在集群里又找不着。通常未分配分片的来源是未分配的副本。比如，一个有 5 分片和 1 副本的索引，在单节点集群上，就会有 5 个未分配副本分片。如果你的集群是 red 状态，也会长期保有未分配分片（因为缺少主分片）。其他指标解释：</description></item></channel></rss>